<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-09-14">

<title>OTS TBCP 2024 - Importing and formatting data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">OTS TBCP 2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text"> </span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="./r_basics.html">
 <span class="dropdown-text">R basics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./importing_data.html">
 <span class="dropdown-text">Import and format data in R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./como_simular_datos.qmd">
 <span class="dropdown-text">Simulating data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./modelos_de_regresion.qmd">
 <span class="dropdown-text">Regresion models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ggplot2.qmd">
 <span class="dropdown-text">Elegant graphs with ggplot2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./course_prep.html"> 
<span class="menu-text">Course prep</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://codefile.io/f/inMsojTFoN"> 
<span class="menu-text">Sharing code</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./instructor.html"> 
<span class="menu-text">Instructor</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maRce10/OTS_TBCP_2024"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
  <li><a href="#before-importing-data" id="toc-before-importing-data" class="nav-link active" data-scroll-target="#before-importing-data"><span class="header-section-number">1</span> Before importing data</a></li>
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data"><span class="header-section-number">2</span> Importing data</a>
  <ul class="collapse">
  <li><a href="#setting-the-working-directory" id="toc-setting-the-working-directory" class="nav-link" data-scroll-target="#setting-the-working-directory"><span class="header-section-number">2.1</span> Setting the working directory</a></li>
  <li><a href="#reading-data" id="toc-reading-data" class="nav-link" data-scroll-target="#reading-data"><span class="header-section-number">2.2</span> Reading data</a></li>
  <li><a href="#reading-excel-files" id="toc-reading-excel-files" class="nav-link" data-scroll-target="#reading-excel-files"><span class="header-section-number">2.3</span> Reading excel files</a></li>
  </ul></li>
  <li><a href="#formatting-data" id="toc-formatting-data" class="nav-link" data-scroll-target="#formatting-data"><span class="header-section-number">3</span> Formatting data</a>
  <ul class="collapse">
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data"><span class="header-section-number">3.1</span> Tidy data</a></li>
  <li><a href="#gathering-data" id="toc-gathering-data" class="nav-link" data-scroll-target="#gathering-data"><span class="header-section-number">3.2</span> Gathering data</a></li>
  <li><a href="#spreading" id="toc-spreading" class="nav-link" data-scroll-target="#spreading"><span class="header-section-number">3.3</span> Spreading</a></li>
  <li><a href="#separate" id="toc-separate" class="nav-link" data-scroll-target="#separate"><span class="header-section-number">3.4</span> Separate</a></li>
  <li><a href="#unite" id="toc-unite" class="nav-link" data-scroll-target="#unite"><span class="header-section-number">3.5</span> Unite</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Importing and formatting data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 14, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="objectives" class="level1 unnumbered unlisted alert alert-info">
<h1 class="unnumbered unlisted">Objectives</h1>
<ul>
<li><p>Get familiar with the basic input data format</p></li>
<li><p>Know the main functions to import data and format it</p></li>
</ul>
</section>
<section id="before-importing-data" class="level1 alert alert-warning" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Before importing data</h1>
<p>There are a few habits for data entry that will make it easier to import data correctly into <code>R</code>:</p>
<ul>
<li><p>Reserve the first row for the header</p></li>
<li><p>Reserve the first column to the sampling unit</p></li>
<li><p>Use “_“,”.” or “-” instead of empty spaces (e.g.&nbsp;“Cornell_University”)</p></li>
<li><p>Use short names</p></li>
<li><p>Avoid using uncommon symbols such as ?, $,%, ^, &amp;, *, (, ),-,#, ?,,,&lt;,&gt;, /, |, , [ ,] ,{, and }</p></li>
<li><p>Be consistent when referring to the same things (i.e.&nbsp;write them always in the same way)</p></li>
<li><p>Delete any extra comments outside the data set columns</p></li>
<li><p>Indicate missing values with NA (or at least empty spaces)</p></li>
<li><p>Don’t even think about color-coding your data in excel</p></li>
</ul>
</section>
<p>&nbsp;</p>
<section id="importing-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Importing data</h1>
<p>Importing data into <code>R</code> is a crucial and apparently simple step. However, given the diversity of data formats and operating systems, as well as the many possible sources of error, inputting data in <code>R</code> is not always that straightforward. Most issues are related with:</p>
<ul>
<li><p>Telling <code>R</code> in which directory the file is found</p></li>
<li><p>Telling <code>R</code> how the data is encoded (e.g.&nbsp;comma-separated, fixed width, etc)</p></li>
<li><p>Handling empty cells and uncommon characters</p></li>
</ul>
<p>&nbsp;</p>
<section id="setting-the-working-directory" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="setting-the-working-directory"><span class="header-section-number">2.1</span> Setting the working directory</h2>
<p>To read data in R you need to specify the working directory. It can be set with the function <code>setwd()</code>. The way you do this depends on the operating system (windows, mac, Linux). The folder directory syntax follows the nested structure of the folders. For instance:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/home/m/Desktop/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>… sets the working directory in the folder “Desktop”, which is found within “m”, which is found within “home”.</p>
<p>&nbsp;</p>
<p>Some basic tips for setting the working directory:</p>
<ul>
<li><p>Make sure the location is quoted</p></li>
<li><p>Make sure you have forward-slash (/) between folder names (although double backward-slashes seem to work in windows)</p></li>
<li><p>Do not include any file name in the folder directory name</p></li>
<li><p>To find the location you can look at the properties of a file in that folder and copy it</p></li>
<li><p>The path to the folder should be quoted (““)</p></li>
<li><p>The name matches exactly (better to copy/paste)</p></li>
<li><p>Use <code>list.files()</code> to check which files are in the working directory</p></li>
<li><p><code>R</code> can suggest and auto-complete the folder names by pressing “tab” when within quotes:</p></li>
</ul>
<p>&nbsp;</p>
<p><img src="suggest_folder.gif" alt="Color spectro" height="150" width="550"></p>
<p>&nbsp;</p>
<p><font size="5">Setting the working directory in windows</font></p>
<p>In windows it should be something like this:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/location"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You can also do this (only on windows!):</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="fu">choose.dir</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp; That should pop-up a window where you can choose the location. However, this should only be used to figure out the correct way to write the directory location, not as part of the script itself.</p>
<p>&nbsp;</p>
<p><font size="5">Setting the working directory in OSX (mac)</font></p>
<p>For mac setting the working directory should be something like this:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/yourname/.."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>do not include whatever you have before “users” (like macintosh… )</p>
<p>&nbsp;</p>
<p><font size="5">Setting the working directory in Linux</font></p>
<p>Similar to the code used in OSX:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/home/m/Desktop/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>The “~” (tilde) can also be used to skip the “home” and “user” folder in Linux:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Desktop/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>The current working directory can be checked as follows:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/marce/Dropbox/courses_and_workshops/estadistica/OTS_TBCP_2024"</code></pre>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="reading-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="reading-data"><span class="header-section-number">2.2</span> Reading data</h2>
<p>Any file can be read in <code>R</code>. It’s just a matter of letting <code>R</code> know in which format is the file encoded (e.g.&nbsp;what conventions were followed when generating the file). The most common formats to store/exchange data sets as the ones we usually handle in biological sciences are <em>txt</em>, <em>csv</em> and <em>xls/xlsx</em>.</p>
<p>&nbsp;</p>
<p>The most commonly used function to import data in <code>R</code> is <code>read.table</code>. The documentation of this function actually includes all the default functions for inputting data:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>?read.table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p><img src="input_data.png" alt="Color spectro" height="500" width="750"></p>
<p>&nbsp;</p>
<p><font size="5">Reading <i>.txt</i> files</font></p>
<p><em>.txt</em> files can be read using <code>read.table</code>. Let’s first download a freely available data set in <em>.txt</em> format:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set working directory</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"PUT THE FOLDER LOCATION WHERE YOU WANT TO SAVE THE FILE HERE"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">"http://esapubs.org/archive/ecol/E090/184/PanTHERIA_1-0_WR93_Aug2008.txt"</span>, <span class="at">destfile =</span> <span class="st">"pantheria_mammals_data.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><em>You can also manually download the file from <a href="http://esapubs.org/archive/ecol/E090/184/PanTHERIA_1-0_WR93_Aug2008.txt">here</a></em></p>
<p>&nbsp;</p>
<p>The file can be input into <code>R</code> as follows:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read file</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>pntr_dt <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"pantheria_mammals_data.txt"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check structure</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pntr_dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Order</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Family</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Genus</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Species</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Binomial</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X1.1_ActivityCycle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Muridae</td>
<td style="text-align: left;">Abditomys</td>
<td style="text-align: left;">latidens</td>
<td style="text-align: left;">Abditomys latidens</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Muridae</td>
<td style="text-align: left;">Abrawayaomys</td>
<td style="text-align: left;">ruschii</td>
<td style="text-align: left;">Abrawayaomys ruschii</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Abrocomidae</td>
<td style="text-align: left;">Abrocoma</td>
<td style="text-align: left;">bennettii</td>
<td style="text-align: left;">Abrocoma bennettii</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Abrocomidae</td>
<td style="text-align: left;">Abrocoma</td>
<td style="text-align: left;">boliviensis</td>
<td style="text-align: left;">Abrocoma boliviensis</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Abrocomidae</td>
<td style="text-align: left;">Abrocoma</td>
<td style="text-align: left;">cinerea</td>
<td style="text-align: left;">Abrocoma cinerea</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chiroptera</td>
<td style="text-align: left;">Pteropodidae</td>
<td style="text-align: left;">Acerodon</td>
<td style="text-align: left;">celebensis</td>
<td style="text-align: left;">Acerodon celebensis</td>
<td style="text-align: right;">-999</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">X5.1_AdultBodyMass_g</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X8.1_AdultForearmLen_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X13.1_AdultHeadBodyLen_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X2.1_AgeatEyeOpening_d</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">268</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">223.99</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="even">
<td style="text-align: right;">63</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="odd">
<td style="text-align: right;">251</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="even">
<td style="text-align: right;">158</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="odd">
<td style="text-align: right;">194</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999.00</td>
<td style="text-align: right;">-999</td>
</tr>
<tr class="even">
<td style="text-align: right;">382</td>
<td style="text-align: right;">133.49</td>
<td style="text-align: right;">201.55</td>
<td style="text-align: right;">-999</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>The file name is quoted and contains the file extension.</p>
<p>&nbsp;</p>
<p>Note that the value -999 is used to define empty cells. We can read this values as <em>NAs</em> while importing the data using the ‘na.strings’ argument:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read file</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>pntr_dt <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"pantheria_mammals_data.txt"</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">na.strings =</span> <span class="st">"-999"</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check structure</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pntr_dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Order</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Family</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Genus</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Species</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MSW93_Binomial</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X1.1_ActivityCycle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Muridae</td>
<td style="text-align: left;">Abditomys</td>
<td style="text-align: left;">latidens</td>
<td style="text-align: left;">Abditomys latidens</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Muridae</td>
<td style="text-align: left;">Abrawayaomys</td>
<td style="text-align: left;">ruschii</td>
<td style="text-align: left;">Abrawayaomys ruschii</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Abrocomidae</td>
<td style="text-align: left;">Abrocoma</td>
<td style="text-align: left;">bennettii</td>
<td style="text-align: left;">Abrocoma bennettii</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Abrocomidae</td>
<td style="text-align: left;">Abrocoma</td>
<td style="text-align: left;">boliviensis</td>
<td style="text-align: left;">Abrocoma boliviensis</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rodentia</td>
<td style="text-align: left;">Abrocomidae</td>
<td style="text-align: left;">Abrocoma</td>
<td style="text-align: left;">cinerea</td>
<td style="text-align: left;">Abrocoma cinerea</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chiroptera</td>
<td style="text-align: left;">Pteropodidae</td>
<td style="text-align: left;">Acerodon</td>
<td style="text-align: left;">celebensis</td>
<td style="text-align: left;">Acerodon celebensis</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">X5.1_AdultBodyMass_g</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X8.1_AdultForearmLen_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X13.1_AdultHeadBodyLen_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">X2.1_AgeatEyeOpening_d</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">268</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">223.99</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">63</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">251</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">158</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">194</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">382</td>
<td style="text-align: right;">133.49</td>
<td style="text-align: right;">201.55</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p><font size="5">Reading <i>.csv</i> files</font></p>
<p>Again, we can download an example file online:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">"http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2013/03/eBird_Taxonomy_v2017_18Aug2017.csv"</span>, <span class="at">destfile =</span> <span class="st">"clements_bird_list.csv"</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>clm_lst <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"clements_bird_list.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(clm_lst)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">TAXON_ORDER</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CATEGORY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SPECIES_CODE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PRIMARY_COM_NAME</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SCI_NAME</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">ostric2</td>
<td style="text-align: left;">Common Ostrich</td>
<td style="text-align: left;">Struthio camelus</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">ostric3</td>
<td style="text-align: left;">Somali Ostrich</td>
<td style="text-align: left;">Struthio molybdophanes</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: left;">slash</td>
<td style="text-align: left;">y00934</td>
<td style="text-align: left;">Common/Somali Ostrich</td>
<td style="text-align: left;">Struthio camelus/molybdophanes</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">grerhe1</td>
<td style="text-align: left;">Greater Rhea</td>
<td style="text-align: left;">Rhea americana</td>
</tr>
<tr class="odd">
<td style="text-align: right;">13</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">lesrhe2</td>
<td style="text-align: left;">Lesser Rhea</td>
<td style="text-align: left;">Rhea pennata</td>
</tr>
<tr class="even">
<td style="text-align: right;">14</td>
<td style="text-align: left;">issf</td>
<td style="text-align: left;">lesrhe4</td>
<td style="text-align: left;">Lesser Rhea (Puna)</td>
<td style="text-align: left;">Rhea pennata tarapacensis/garleppi</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ORDER1</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">FAMILY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SPECIES_GROUP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REPORT_AS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">Ostriches</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">Rheas</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lesrhe2</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>You can also manually download the file from <a href="http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2013/03/eBird_Taxonomy_v2017_18Aug2017.csv">here</a></p>
<p>&nbsp;</p>
<p>As in the previous example, we can tell <code>R</code> how to identify empty cells using the ‘na.strings’ argument:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>clm_lst <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"clements_bird_list.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>, <span class="at">na.strings =</span> <span class="st">""</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(clm_lst)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">TAXON_ORDER</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CATEGORY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SPECIES_CODE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PRIMARY_COM_NAME</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SCI_NAME</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">ostric2</td>
<td style="text-align: left;">Common Ostrich</td>
<td style="text-align: left;">Struthio camelus</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">ostric3</td>
<td style="text-align: left;">Somali Ostrich</td>
<td style="text-align: left;">Struthio molybdophanes</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: left;">slash</td>
<td style="text-align: left;">y00934</td>
<td style="text-align: left;">Common/Somali Ostrich</td>
<td style="text-align: left;">Struthio camelus/molybdophanes</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">grerhe1</td>
<td style="text-align: left;">Greater Rhea</td>
<td style="text-align: left;">Rhea americana</td>
</tr>
<tr class="odd">
<td style="text-align: right;">13</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">lesrhe2</td>
<td style="text-align: left;">Lesser Rhea</td>
<td style="text-align: left;">Rhea pennata</td>
</tr>
<tr class="even">
<td style="text-align: right;">14</td>
<td style="text-align: left;">issf</td>
<td style="text-align: left;">lesrhe4</td>
<td style="text-align: left;">Lesser Rhea (Puna)</td>
<td style="text-align: left;">Rhea pennata tarapacensis/garleppi</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ORDER1</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">FAMILY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SPECIES_GROUP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REPORT_AS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">Ostriches</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">Rheas</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">lesrhe2</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
</section>
<section id="reading-excel-files" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="reading-excel-files"><span class="header-section-number">2.3</span> Reading excel files</h2>
<p>Most researchers enter data into excel spreadsheets. So it would be pretty handy to read the data directly from there. To read <em>xls</em> and <em>xlsx</em> files we need to install the package “readxl” (there are other packages that can be used but they all work similarly):</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="at">pkgs =</span> <span class="st">"readxl"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>And load it:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>As we did above, download an example file from an online repository. In this case is the same Clements bird taxonomy list in <em>xlsx</em> format:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">"http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2017/08/eBird_Taxonomy_v2017_18Aug2017.xlsx"</span>, <span class="at">destfile =</span> <span class="st">"clements_bird_list.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You can also manually download the file from <a href="http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2017/08/eBird_Taxonomy_v2017_18Aug2017.xlsx">here</a></p>
<p>&nbsp;</p>
<p>Now we can use the function <code>read_excel()</code> to read the file:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read file</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>clm_lst2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"clements_bird_list.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(clm_lst2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">TAXON_ORDER</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">CATEGORY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SPECIES_CODE</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PRIMARY_COM_NAME</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SCI_NAME</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">ostric2</td>
<td style="text-align: left;">Common Ostrich</td>
<td style="text-align: left;">Struthio camelus</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">ostric3</td>
<td style="text-align: left;">Somali Ostrich</td>
<td style="text-align: left;">Struthio molybdophanes</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: left;">slash</td>
<td style="text-align: left;">y00934</td>
<td style="text-align: left;">Common/Somali Ostrich</td>
<td style="text-align: left;">Struthio camelus/molybdophanes</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">grerhe1</td>
<td style="text-align: left;">Greater Rhea</td>
<td style="text-align: left;">Rhea americana</td>
</tr>
<tr class="odd">
<td style="text-align: right;">13</td>
<td style="text-align: left;">species</td>
<td style="text-align: left;">lesrhe2</td>
<td style="text-align: left;">Lesser Rhea</td>
<td style="text-align: left;">Rhea pennata</td>
</tr>
<tr class="even">
<td style="text-align: right;">14</td>
<td style="text-align: left;">issf</td>
<td style="text-align: left;">lesrhe4</td>
<td style="text-align: left;">Lesser Rhea (Puna)</td>
<td style="text-align: left;">Rhea pennata tarapacensis/garleppi</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">ORDER1</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">FAMILY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SPECIES_GROUP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">REPORT_AS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">Ostriches</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Struthioniformes</td>
<td style="text-align: left;">Struthionidae (Ostriches)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">Rheas</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rheiformes</td>
<td style="text-align: left;">Rheidae (Rheas)</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">lesrhe2</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>You need to specify the file name (including extension) and the excel sheet (tab) name. <code>read_excel()</code> auto detects the format from the file extension. The functions <code>read_xls()</code> and <code>read_xlsx()</code> can be used to read files without extension.</p>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise 1</font></p>
<p>All default functions to input data into <code>R</code> have a counterpart to export the same type of data. The names of these other functions are similar to the ones for reading data, although they typically start with “write” or “save”.</p>
<p><br></p>
<p>1.1 What are the names of the default functions for exporting the data formats we used above? (hint: try <code>apropos</code> to check which functions are available)</p>
<p><br></p>
<p>1.2 Export the mammals data as a <em>.csv</em> file</p>
<p><br></p>
<p>1.3 Export the mammals data again, this time excluding the row names</p>
<p><br></p>
<p>1.4 Read the <em>.csv</em> file using <code>read.table</code></p>
<p><br></p>
<p>1.5 What other packages can import excel files into <code>R</code>?</p>
<p><br></p>
<p>1.6 Can you export an excel file or add data to an existing excel file from <code>R</code>?</p>
<p><br></p>
<p>1.7 Using the “clements_bird_list.csv” file, how would you tell <code>R</code> to read both “Rheiformes” and “Ostriches” as empty cells (while still reading empty cells as empty cells)?</p>
</div>
<hr>
</section>
</section>
<section id="formatting-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Formatting data</h1>
<p>This section deals with organizing your data in a way that simplify its handling, exploration and analysis. As you can probably guess, the more consistent things are done, the more predictable they become. This also applies to data. If data is organized with the same logic, you can expect the same type of manipulations and analyses to be applicable on different data sets. Organizing the data is a key (but usually neglected) aspect of the data analysis workflow. When data is properly organized you will spend much less time on formatting and more time on the actual analytic questions.</p>
<p>When possible, we will run the data formatting examples using both the ‘tidyr’ package and the base <code>R</code> functions.</p>
<section id="tidy-data" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="tidy-data"><span class="header-section-number">3.1</span> Tidy data</h2>
<p>“Tidy data” is a logic for organizing data sets in a consistent and intuitive way. To run some of the code below you will need the ‘tidyr’ and ‘dplyr’ packages, which can be installed/loaded as follows:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="at">pkgs =</span> <span class="st">"tidyr"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="at">pkgs =</span> <span class="st">"dplyr"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>&nbsp;</p>
<p>The same data can be represented in many ways. In the example below each data set shows exactly the same values of four variables <em>country</em>, <em>year</em>, <em>population</em>, and <em>cases</em>, but in each data set values are organized in a different way. The data shows the number of tuberculosis cases in Afghanistan, Brazil, and China between 1999 and 2000:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2666</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">80488</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">213766</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">745</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">2666</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">37737</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">80488</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">212258</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">213766</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">745/19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">2666/20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">37737/172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">80488/174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">212258/1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">213766/1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>Or even spread across 2 different data sets:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table4a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">2666</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">80488</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">213766</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table4b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">19987071</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">172006362</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1272915272</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>All these data sets contained the same underlying data. However, they are not equally easy to use.</p>
<p>There are three interrelated rules to make a data set tidy:</p>
<ol type="1">
<li><p>Each variable must have its own column</p></li>
<li><p>Each observation must have its own row</p></li>
<li><p>Each value must have its own cell</p></li>
</ol>
<p>This figure shows the rules visually:</p>
<p><img src="tidy-1.png" alt="tidy data" height="500" width="750"> <font size="2">* Modified from <i>R for Data Science</i></font> &nbsp;</p>
<p>These three rules are interrelated because it’s impossible to only satisfy two of the three. That interrelationship leads to an even simpler set of practical instructions:</p>
<ol type="1">
<li><p>Put each data set in a data frame</p></li>
<li><p>Put each variable in a column</p></li>
</ol>
<p>&nbsp;</p>
<p>In the example above, only <code>table1</code> is tidy. It’s the only representation where each column is a variable. There are two main advantages of formatting the data in this way:</p>
<ol type="1">
<li><p>If you have a consistent data structure, it’s easier to learn the tools that work with it because they have an underlying uniformity</p></li>
<li><p>Placing variables in columns fits well <code>R</code>’s vectorized nature. As we have seen, built-in <code>R</code> functions work with vectors of values. That makes transforming tidy data feel particularly natural</p></li>
</ol>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise 2</font></p>
<p><br></p>
<p>2.1 Describe how the variables and observations are organized in each of the sample data frames</p>
<p><br></p>
<p>2.2 Calculate the rate of cases per 10000 people for “table1”, “table2” and “table4a”/“table4b”</p>
</div>
<hr>
</section>
<section id="gathering-data" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="gathering-data"><span class="header-section-number">3.2</span> Gathering data</h2>
<p>A common problem is a data set where some of the column names are not names of variables, but values of a variable. Take “table4a”: the column names 1999 and 2000 represent values of the year variable, and each row represents two observations, not one:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table4a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">2666</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">80488</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">213766</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>To tidy a data set like this, we need to <strong>gather</strong> those columns into a new pair of variables. To do this we need three parameters:</p>
<ul>
<li><p>The set of columns that represent values, not variables. In this example, those are the columns <code>1999</code> and <code>2000</code></p></li>
<li><p>The name of the variable whose values form the column names. In the ‘tidyr’ syntax that is called the <code>key</code>, which in this case is <code>year</code></p></li>
<li><p>The name of the variable whose values are spread over the cells. In the ‘tidyr’ syntax that is called that <code>value</code>, which in this case is the number of <code>cases</code></p></li>
</ul>
<p>These parameters can be used to create a tidy data set using the function <code>gather()</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(table4a, <span class="at">key =</span> <span class="st">"year"</span>, <span class="at">value =</span> <span class="st">"cases"</span>, <span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cases</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">745</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">37737</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">212258</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">2666</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">80488</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">213766</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>We can visualize this formatting as follows:</p>
<p><img src="gather.png" alt="gather data" height="500" width="850"> <font size="2">* Modified from <i>R for Data Science</i></font> &nbsp;</p>
<p><code>gather()</code> can also be used to tidy <code>table4b</code>. The only difference is the variable stored in the cell values:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(<span class="at">data =</span> table4b, <span class="at">key =</span> <span class="st">"year"</span>, <span class="at">value =</span> <span class="st">"population"</span>, <span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>To combine the tidied versions of <code>table4a</code> and <code>table4b</code> into a single data frame (or ‘tibble’), we can either use <code>dplyr::left_join()</code> or <code>merge()</code> from base <code>R</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tidy4a <span class="ot">&lt;-</span> <span class="fu">gather</span>(table4a, <span class="at">key =</span> <span class="st">"year"</span>, <span class="at">value =</span> <span class="st">"cases"</span>, <span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>tidy4b <span class="ot">&lt;-</span> <span class="fu">gather</span>(table4b, <span class="at">key =</span> <span class="st">"year"</span>, <span class="at">value =</span> <span class="st">"population"</span>, <span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(<span class="at">x =</span> tidy4a, <span class="at">y =</span> tidy4b, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">2666</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">80488</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">213766</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(<span class="at">x =</span> tidy4a, <span class="at">y =</span>  tidy4b, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">2666</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">80488</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: left;">1999</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">2000</td>
<td style="text-align: right;">213766</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
</section>
<section id="spreading" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="spreading"><span class="header-section-number">3.3</span> Spreading</h2>
<p>Spreading is the opposite of gathering. You use it when an observation is scattered across multiple rows. For example, in <code>table2</code> an observation is a country in a year, but each observation is spread across two rows:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">745</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">2666</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">37737</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">80488</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">212258</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">213766</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>To tidy this data set up, we only need two parameters:</p>
<ul>
<li><p>The column that contains variable names, the <code>key</code> column. Here, it’s <code>type</code>.</p></li>
<li><p>The column that contains values forms multiple variables, the <code>value</code> column. Here it’s <code>count</code>.</p></li>
</ul>
<p>&nbsp;</p>
<p>To do this we can use <code>spread()</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spread</span>(table2, <span class="at">key =</span> <span class="st">"type"</span>, <span class="at">value =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2666</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">80488</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">213766</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>&nbsp;</p>
<p>which can be visualized as follows:</p>
<p><img src="spreading.png" alt="spreading data" height="500" width="850"> <font size="2">* Modified from <i>R for Data Science</i></font> &nbsp;</p>
<p><code>spread()</code> and <code>gather()</code> are complementary functions. <code>gather()</code> makes wide tables narrower and longer; <code>spread()</code> makes long tables shorter and wider.</p>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise 3</font></p>
<p><br></p>
<p>3.1 Tidy up the following data set on tree height for 2 species:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>plnt_sz <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">forest =</span> <span class="fu">c</span>(<span class="st">"old_growth"</span>, <span class="st">"disturbed"</span>), </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Species_1 =</span> <span class="fu">c</span>(<span class="dv">154</span>, <span class="dv">160</span>), </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Species_2 =</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">113</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<p>&nbsp;</p>
<hr>
<p><font size="5">Separating and uniting</font></p>
<p>So far we have fixed “table2” and “table4”, but not “table3”. “table3” has a different problem: we have one column (<em>rate</em>) that contains two variables (<em>cases and </em>population*). This can be fixed using the <code>separate()</code> function . We will also look at its complement<code>unite()</code>, which is used when a single variable is spread across multiple columns.</p>
<p>&nbsp;</p>
</section>
<section id="separate" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="separate"><span class="header-section-number">3.4</span> Separate</h2>
<p><code>separate()</code> pulls apart one column into multiple columns, by splitting wherever a separator character appears. Take <code>table3</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(table3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">745/19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">2666/20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">37737/172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">80488/174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">212258/1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">213766/1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>Visually it does something like this:</p>
<p><img src="separate.png" alt="separate data" height="500" width="850"> <font size="2">* Modified from <i>R for Data Science</i></font></p>
<p>&nbsp;</p>
<p>The <em>rate</em> column contains both <em>cases</em> and <em>population</em> variables, and we need to split it into two variables. <code>separate()</code> takes the name of the column to separate, and the names of the new columns to be created:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(<span class="at">data =</span> table3, <span class="at">col =</span>  rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">745</td>
<td style="text-align: left;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">2666</td>
<td style="text-align: left;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">37737</td>
<td style="text-align: left;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">80488</td>
<td style="text-align: left;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">212258</td>
<td style="text-align: left;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">213766</td>
<td style="text-align: left;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>By default, <code>separate()</code> will split based on any non-alphanumeric character (i.e.&nbsp;a character that isn’t a number or letter). In the code above, <code>separate()</code> split the values of <em>rate</em> at the forward slash characters. This can be explicitly stated (to avoid any errors):</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>tb3 <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> table3, <span class="at">col =</span> rate,  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>), <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>tb3 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">745</td>
<td style="text-align: left;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">2666</td>
<td style="text-align: left;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">37737</td>
<td style="text-align: left;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">80488</td>
<td style="text-align: left;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">212258</td>
<td style="text-align: left;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">213766</td>
<td style="text-align: left;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [6 × 4] (S3: tbl_df/tbl/data.frame)
 $ country   : chr [1:6] "Afghanistan" "Afghanistan" "Brazil" "Brazil" ...
 $ year      : num [1:6] 1999 2000 1999 2000 1999 ...
 $ cases     : chr [1:6] "745" "2666" "37737" "80488" ...
 $ population: chr [1:6] "19987071" "20595360" "172006362" "174504898" ...</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>Note that the <em>case</em> and <em>population</em> are character columns. By default <code>separate()</code> leaves the type of the new columns as in the original one. In this case this is not ideal as those really are numbers. We can ask <code>separate()</code> to try and convert to better types using <code>convert = TRUE</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>tb3 <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> table3, <span class="at">col =</span> rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"population"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tb3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [6 × 4] (S3: tbl_df/tbl/data.frame)
 $ country   : chr [1:6] "Afghanistan" "Afghanistan" "Brazil" "Brazil" ...
 $ year      : num [1:6] 1999 2000 1999 2000 1999 ...
 $ cases     : int [1:6] 745 2666 37737 80488 212258 213766
 $ population: int [1:6] 19987071 20595360 172006362 174504898 1272915272 1280428583</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>You can also pass a vector of integers to <code>sep</code>, which will be interpreted as positions to split at. Positive values start at 1 on the far-left of the strings; negative value start at -1 on the far-right of the strings. When using integers to separate strings, the length of <code>sep</code> should be one less than the number of names in <code>into</code>. You can use this to separate the last two digits of each year:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(<span class="at">data =</span> table3, <span class="at">col =</span> year, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"century"</span>, <span class="st">"year"</span>), </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">sep =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">century</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">99</td>
<td style="text-align: left;">745/19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">00</td>
<td style="text-align: left;">2666/20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">99</td>
<td style="text-align: left;">37737/172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">00</td>
<td style="text-align: left;">80488/174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: left;">19</td>
<td style="text-align: left;">99</td>
<td style="text-align: left;">212258/1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">00</td>
<td style="text-align: left;">213766/1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>Separating columns can also be done with base <code>R</code>, although it takes a bit more coding:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>table3<span class="sc">$</span>cases <span class="ot">&lt;-</span> <span class="fu">sapply</span>(table3<span class="sc">$</span>rate, <span class="cf">function</span>(x) <span class="fu">try</span>(<span class="fu">strsplit</span>(x, <span class="st">"/"</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>]), <span class="at">USE.NAMES =</span> <span class="cn">FALSE</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>table3<span class="sc">$</span>population <span class="ot">&lt;-</span> <span class="fu">sapply</span>(table3<span class="sc">$</span>rate, <span class="cf">function</span>(x) <span class="fu">try</span>(<span class="fu">strsplit</span>(x, <span class="st">"/"</span>)[[<span class="dv">1</span>]][<span class="dv">2</span>]), <span class="at">USE.NAMES =</span> <span class="cn">FALSE</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>tb3 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rate</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">745/19987071</td>
<td style="text-align: left;">745</td>
<td style="text-align: left;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">2666/20595360</td>
<td style="text-align: left;">2666</td>
<td style="text-align: left;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">37737/172006362</td>
<td style="text-align: left;">37737</td>
<td style="text-align: left;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">80488/174504898</td>
<td style="text-align: left;">80488</td>
<td style="text-align: left;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">212258/1272915272</td>
<td style="text-align: left;">212258</td>
<td style="text-align: left;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">213766/1280428583</td>
<td style="text-align: left;">213766</td>
<td style="text-align: left;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [6 × 4] (S3: tbl_df/tbl/data.frame)
 $ country   : chr [1:6] "Afghanistan" "Afghanistan" "Brazil" "Brazil" ...
 $ year      : num [1:6] 1999 2000 1999 2000 1999 ...
 $ cases     : chr [1:6] "745" "2666" "37737" "80488" ...
 $ population: chr [1:6] "19987071" "20595360" "172006362" "174504898" ...</code></pre>
</div>
</div>
<p>&nbsp;</p>
</section>
<section id="unite" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="unite"><span class="header-section-number">3.5</span> Unite</h2>
<p><code>unite()</code> is the inverse of <code>separate()</code>: combining multiple columns into a single column:</p>
<p><img src="unite.png" alt="unite data" height="500" width="850"> <font size="2">* Modified from <i>R for Data Science</i></font></p>
<p>&nbsp;</p>
<p>However, you will need it much less frequently than <code>separate()</code>.</p>
<p>We can use <code>unite()</code> to rejoin the <em>century</em> and <em>year</em> columns that we created above:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(<span class="at">data =</span> table5, <span class="at">col =</span> <span class="st">"new"</span>, <span class="st">"century"</span>, <span class="st">"year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">new</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">19_99</td>
<td style="text-align: left;">745/19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">20_00</td>
<td style="text-align: left;">2666/20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">19_99</td>
<td style="text-align: left;">37737/172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: left;">20_00</td>
<td style="text-align: left;">80488/174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: left;">19_99</td>
<td style="text-align: left;">212258/1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: left;">20_00</td>
<td style="text-align: left;">213766/1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>In this function we can also use the <code>sep</code> argument (although in this example it was not specified).</p>
<p>&nbsp;</p>
<div class="alert alert-info">
<p><font size="5">Exercise 3</font></p>
<p><br></p>
<p>3.1 Unite <em>century</em> and <em>year</em> in “table5” using base <code>R</code> (hint: <code>paste()</code>)</p>
<p><br></p>
</div>
<hr>
</section>
</section>
<section id="references" class="level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">References</h1>
<ul>
<li><p>Clements, J. F., T. S. Schulenberg, M. J. Iliff, D. Roberson, T. A. Fredericks, B. L. Sullivan, and C. L. Wood. 2017. <em>The eBird/Clements checklist of birds of the world: v2016</em>.</p></li>
<li><p>Jones, Jon Bielby, Marcel Cardillo, Susanne A. Fritz, Justin O’Dell, C. David L. Orme, Kamran Safi, Wes Sechrest, Elizabeth H. Boakes, Chris Carbone, Christina Connolly, Michael J. Cutts, Janine K. Foster, Richard Grenyer, Michael Habib, Christopher A. Plaster, Samantha A. Price, Elizabeth A. Rigby, Janna Rist, Amber Teacher, Olaf R. P. Bininda-Emonds, John L. Gittleman, Georgina M. Mace, and Andy Purvis. 2009. <em>PanTHERIA: a species-level database of life history, ecology, and geography of extant and recently extinct mammals</em>. Ecology 90:2648.</p></li>
<li><p>Wickham, Hadley, and Garrett Grolemund. 2016. <em>R for data science: import, tidy, transform, visualize, and model data</em>. <a href="http://r4ds.had.co.nz">website</a></p></li>
<li><p><a href="https://www.datacamp.com/community/tutorials/r-data-import-tutorial">Data import tutorial- DataCamp</a></p></li>
</ul>
<hr>
</section>
<section id="session-information" class="level1 unnumbered unlisted">
<h1 class="unnumbered unlisted">Session information</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.2 (2023-10-31)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.2 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0 
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

time zone: America/Costa_Rica
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] dplyr_1.1.4        tidyr_1.3.1        readxl_1.4.3       kableExtra_1.4.0  
[5] knitr_1.48         ggplot2_3.5.1      RColorBrewer_1.1-3

loaded via a namespace (and not attached):
 [1] gtable_0.3.5      jsonlite_1.8.8    compiler_4.3.2    tidyselect_1.2.1 
 [5] xml2_1.3.6        stringr_1.5.1     systemfonts_1.1.0 scales_1.3.0     
 [9] yaml_2.3.10       fastmap_1.2.0     R6_2.5.1          generics_0.1.3   
[13] htmlwidgets_1.6.4 tibble_3.2.1      munsell_0.5.1     svglite_2.1.3    
[17] pillar_1.9.0      rlang_1.1.4       utf8_1.2.4        stringi_1.8.4    
[21] xfun_0.47         viridisLite_0.4.2 cli_3.6.3         withr_3.0.1      
[25] magrittr_2.0.3    digest_0.6.37     grid_4.3.2        rstudioapi_0.16.0
[29] lifecycle_1.0.4   vctrs_0.6.5       evaluate_0.24.0   glue_1.7.0       
[33] cellranger_1.1.0  fansi_1.0.6       colorspace_2.1-1  purrr_1.0.2      
[37] rmarkdown_2.28    tools_4.3.2       pkgconfig_2.0.3   htmltools_0.5.8.1</code></pre>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/marce10\.github\.io\/OTS_TBCP_2024\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb45" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Importing and formatting data"</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,echo=FALSE,message=FALSE}</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="in">options("digits"=5)</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="in">options("digits.secs"=3)</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="in"># options to customize chunk outputs</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="in">  message = FALSE</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="in"> )</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>::: {.alert .alert-info}</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="fu"># Objectives {.unnumbered .unlisted}</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Get familiar with the basic input data format</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Know the main functions to import data and format it</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setting functions and parameters, echo=FALSE, message=FALSE, warning=F}</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a><span class="in"># remove all objects</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a><span class="in">rm(list = ls())</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a><span class="in"># unload all non-based packages</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a><span class="in">out &lt;- sapply(paste('package:', names(sessionInfo()$otherPkgs), sep = ""), function(x) try(detach(x, unload = FALSE, character.only = TRUE), silent = T))</span></span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a><span class="in">options("digits"=5)</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a><span class="in">options("digits.secs"=3)</span></span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a><span class="in"> </span></span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a><span class="in">options(knitr.table.format = "html") </span></span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c("RColorBrewer", "ggplot2", "knitr", "kableExtra", "readxl", "tidyr", "dplyr")</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a><span class="in">aa &lt;- lapply(x, function(y) {</span></span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a><span class="in">  if(!y %in% installed.packages()[,"Package"])  {if(y != "warbleR") install.packages(y) else devtools::install_github("maRce10/warbleR")</span></span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a><span class="in">try(require(y, character.only = T), silent = T)</span></span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a><span class="in">  })</span></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a><span class="in">theme_set(theme_classic(base_size = 50))</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a><span class="in">cols &lt;- brewer.pal(10,"Spectral")</span></span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>&lt;div class="alert alert-warning"&gt;</span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a><span class="fu"># Before importing data</span></span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a>There are a few habits for data entry that will make it easier to import data correctly into <span class="in">`R`</span>:</span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Reserve the first row for the header</span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Reserve the first column to the sampling unit</span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Use "_", "." or "-" instead of empty spaces (e.g. "Cornell_University")</span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Use short names</span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Avoid using uncommon symbols such as ?, $,%, ^, &amp;, *, (, ),-,#, ?,,,&lt;,&gt;, /, |, \, <span class="co">[</span><span class="ot"> ,</span><span class="co">]</span> ,{, and }</span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Be consistent when referring to the same things (i.e. write them always in the same way)</span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Delete any extra comments outside the data set columns</span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Indicate missing values with NA (or at least empty spaces)</span>
<span id="cb45-83"><a href="#cb45-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-84"><a href="#cb45-84" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Don't even think about color-coding your data in excel</span>
<span id="cb45-85"><a href="#cb45-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-86"><a href="#cb45-86" aria-hidden="true" tabindex="-1"></a>&lt;/div&gt;</span>
<span id="cb45-87"><a href="#cb45-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-88"><a href="#cb45-88" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-89"><a href="#cb45-89" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb45-90"><a href="#cb45-90" aria-hidden="true" tabindex="-1"></a><span class="fu"># Importing data</span></span>
<span id="cb45-91"><a href="#cb45-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-92"><a href="#cb45-92" aria-hidden="true" tabindex="-1"></a>Importing data into <span class="in">`R`</span> is a crucial and apparently simple step. However, given the diversity of data formats and operating systems, as well as the many possible sources of error, inputting data in <span class="in">`R`</span> is not always that straightforward. Most issues are related with:</span>
<span id="cb45-93"><a href="#cb45-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-94"><a href="#cb45-94" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Telling <span class="in">`R`</span> in which directory the file is found</span>
<span id="cb45-95"><a href="#cb45-95" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-96"><a href="#cb45-96" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Telling <span class="in">`R`</span> how the data is encoded (e.g. comma-separated, fixed width, etc)</span>
<span id="cb45-97"><a href="#cb45-97" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-98"><a href="#cb45-98" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Handling empty cells and uncommon characters</span>
<span id="cb45-99"><a href="#cb45-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-100"><a href="#cb45-100" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-101"><a href="#cb45-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-102"><a href="#cb45-102" aria-hidden="true" tabindex="-1"></a><span class="fu">## Setting the working directory</span></span>
<span id="cb45-103"><a href="#cb45-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-104"><a href="#cb45-104" aria-hidden="true" tabindex="-1"></a>To read data in R you need to specify the working directory. It can be set with the function <span class="in">`setwd()`</span>. The way you do this depends on the operating system (windows, mac, Linux). The folder directory syntax follows the nested structure of the folders. For instance:</span>
<span id="cb45-105"><a href="#cb45-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-106"><a href="#cb45-106" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-107"><a href="#cb45-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-108"><a href="#cb45-108" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("/home/m/Desktop/")</span></span>
<span id="cb45-109"><a href="#cb45-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-110"><a href="#cb45-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-111"><a href="#cb45-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-112"><a href="#cb45-112" aria-hidden="true" tabindex="-1"></a>... sets the working directory in the folder "Desktop", which is found within "m", which is found within "home". </span>
<span id="cb45-113"><a href="#cb45-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-114"><a href="#cb45-114" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-115"><a href="#cb45-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-116"><a href="#cb45-116" aria-hidden="true" tabindex="-1"></a>Some basic tips for setting the working directory:</span>
<span id="cb45-117"><a href="#cb45-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-118"><a href="#cb45-118" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Make sure the location is quoted</span>
<span id="cb45-119"><a href="#cb45-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-120"><a href="#cb45-120" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Make sure you have forward-slash (/) between folder names (although double backward-slashes seem to work in windows)</span>
<span id="cb45-121"><a href="#cb45-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-122"><a href="#cb45-122" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Do not include any file name in the folder directory name</span>
<span id="cb45-123"><a href="#cb45-123" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-124"><a href="#cb45-124" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>To find the location you can look at the properties of a file in that folder and copy it</span>
<span id="cb45-125"><a href="#cb45-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-126"><a href="#cb45-126" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>The path to the folder should be quoted ("")</span>
<span id="cb45-127"><a href="#cb45-127" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb45-128"><a href="#cb45-128" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>The name matches exactly (better to copy/paste)</span>
<span id="cb45-129"><a href="#cb45-129" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-130"><a href="#cb45-130" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Use <span class="in">`list.files()`</span> to check which files are in the working directory</span>
<span id="cb45-131"><a href="#cb45-131" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-132"><a href="#cb45-132" aria-hidden="true" tabindex="-1"></a><span class="ss">   - </span><span class="in">`R`</span> can suggest and auto-complete the folder names by pressing "tab" when within quotes:</span>
<span id="cb45-133"><a href="#cb45-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-134"><a href="#cb45-134" aria-hidden="true" tabindex="-1"></a> <span class="dv">&amp;nbsp;</span> </span>
<span id="cb45-135"><a href="#cb45-135" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb45-136"><a href="#cb45-136" aria-hidden="true" tabindex="-1"></a>&lt;img src="suggest_folder.gif" alt="Color spectro" height="150" width="550"&gt;</span>
<span id="cb45-137"><a href="#cb45-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-138"><a href="#cb45-138" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-139"><a href="#cb45-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-140"><a href="#cb45-140" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Setting the working directory in windows&lt;/font&gt; </span>
<span id="cb45-141"><a href="#cb45-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-142"><a href="#cb45-142" aria-hidden="true" tabindex="-1"></a>In windows it should be something like this:</span>
<span id="cb45-143"><a href="#cb45-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,eval=FALSE}</span></span>
<span id="cb45-144"><a href="#cb45-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-145"><a href="#cb45-145" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("C:/location")</span></span>
<span id="cb45-146"><a href="#cb45-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-147"><a href="#cb45-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-148"><a href="#cb45-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-149"><a href="#cb45-149" aria-hidden="true" tabindex="-1"></a>You can also do this (only on windows!):</span>
<span id="cb45-150"><a href="#cb45-150" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,eval=FALSE}</span></span>
<span id="cb45-151"><a href="#cb45-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-152"><a href="#cb45-152" aria-hidden="true" tabindex="-1"></a><span class="in">setwd(choose.dir())</span></span>
<span id="cb45-153"><a href="#cb45-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-154"><a href="#cb45-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-155"><a href="#cb45-155" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-156"><a href="#cb45-156" aria-hidden="true" tabindex="-1"></a>That should pop-up a window where you can choose the location. However, this should only be used to figure out the correct way to write the directory location, not as part of the script itself.</span>
<span id="cb45-157"><a href="#cb45-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-158"><a href="#cb45-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-159"><a href="#cb45-159" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-160"><a href="#cb45-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-161"><a href="#cb45-161" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Setting the working directory in OSX (mac)&lt;/font&gt; </span>
<span id="cb45-162"><a href="#cb45-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-163"><a href="#cb45-163" aria-hidden="true" tabindex="-1"></a>For mac setting the working directory should be something like this:</span>
<span id="cb45-164"><a href="#cb45-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-165"><a href="#cb45-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,eval=FALSE}</span></span>
<span id="cb45-166"><a href="#cb45-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-167"><a href="#cb45-167" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("/Users/yourname/..")</span></span>
<span id="cb45-168"><a href="#cb45-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-169"><a href="#cb45-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-170"><a href="#cb45-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-171"><a href="#cb45-171" aria-hidden="true" tabindex="-1"></a>do not include whatever you have before "users" (like macintosh... )</span>
<span id="cb45-172"><a href="#cb45-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-173"><a href="#cb45-173" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-174"><a href="#cb45-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-175"><a href="#cb45-175" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Setting the working directory in Linux&lt;/font&gt; </span>
<span id="cb45-176"><a href="#cb45-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-177"><a href="#cb45-177" aria-hidden="true" tabindex="-1"></a>Similar to the code used in OSX:</span>
<span id="cb45-178"><a href="#cb45-178" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F}</span></span>
<span id="cb45-179"><a href="#cb45-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-180"><a href="#cb45-180" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("/home/m/Desktop/")</span></span>
<span id="cb45-181"><a href="#cb45-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-182"><a href="#cb45-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-183"><a href="#cb45-183" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-184"><a href="#cb45-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-185"><a href="#cb45-185" aria-hidden="true" tabindex="-1"></a>The "~" (tilde) can also be used to skip the "home" and "user" folder in Linux:</span>
<span id="cb45-186"><a href="#cb45-186" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F}</span></span>
<span id="cb45-187"><a href="#cb45-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-188"><a href="#cb45-188" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("~/Desktop/")</span></span>
<span id="cb45-189"><a href="#cb45-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-190"><a href="#cb45-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-191"><a href="#cb45-191" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-192"><a href="#cb45-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-193"><a href="#cb45-193" aria-hidden="true" tabindex="-1"></a>The current working directory can be checked as follows:</span>
<span id="cb45-194"><a href="#cb45-194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T}</span></span>
<span id="cb45-195"><a href="#cb45-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-196"><a href="#cb45-196" aria-hidden="true" tabindex="-1"></a><span class="in">getwd()</span></span>
<span id="cb45-197"><a href="#cb45-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-198"><a href="#cb45-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-199"><a href="#cb45-199" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-200"><a href="#cb45-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-201"><a href="#cb45-201" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reading data</span></span>
<span id="cb45-202"><a href="#cb45-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-203"><a href="#cb45-203" aria-hidden="true" tabindex="-1"></a>Any file can be read in <span class="in">`R`</span>. It's just a matter of letting <span class="in">`R`</span> know in which format is the file encoded (e.g. what conventions were followed when generating the file). The most common formats to store/exchange data sets as the ones we usually handle in biological sciences are  *txt*, *csv* and *xls/xlsx*.</span>
<span id="cb45-204"><a href="#cb45-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-205"><a href="#cb45-205" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-206"><a href="#cb45-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-207"><a href="#cb45-207" aria-hidden="true" tabindex="-1"></a>The most commonly used function to import data in <span class="in">`R`</span> is <span class="in">`read.table`</span>. The documentation of this function actually includes all the default functions for inputting data:</span>
<span id="cb45-208"><a href="#cb45-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-211"><a href="#cb45-211" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-212"><a href="#cb45-212" aria-hidden="true" tabindex="-1"></a>?read.table</span>
<span id="cb45-213"><a href="#cb45-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-214"><a href="#cb45-214" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-215"><a href="#cb45-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-216"><a href="#cb45-216" aria-hidden="true" tabindex="-1"></a>&lt;img src="input_data.png" alt="Color spectro" height="500" width="750"&gt;</span>
<span id="cb45-217"><a href="#cb45-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-218"><a href="#cb45-218" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-219"><a href="#cb45-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-220"><a href="#cb45-220" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Reading &lt;i&gt;.txt&lt;/i&gt; files&lt;/font&gt; </span>
<span id="cb45-221"><a href="#cb45-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-222"><a href="#cb45-222" aria-hidden="true" tabindex="-1"></a>*.txt* files can be read using `read.table`. Let's first download a freely available data set in *.txt* format:</span>
<span id="cb45-223"><a href="#cb45-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-224"><a href="#cb45-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-225"><a href="#cb45-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-226"><a href="#cb45-226" aria-hidden="true" tabindex="-1"></a><span class="in"># set working directory</span></span>
<span id="cb45-227"><a href="#cb45-227" aria-hidden="true" tabindex="-1"></a><span class="in">setwd("PUT THE FOLDER LOCATION WHERE YOU WANT TO SAVE THE FILE HERE")</span></span>
<span id="cb45-228"><a href="#cb45-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-229"><a href="#cb45-229" aria-hidden="true" tabindex="-1"></a><span class="in">download.file("http://esapubs.org/archive/ecol/E090/184/PanTHERIA_1-0_WR93_Aug2008.txt", destfile = "pantheria_mammals_data.txt")</span></span>
<span id="cb45-230"><a href="#cb45-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-231"><a href="#cb45-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-232"><a href="#cb45-232" aria-hidden="true" tabindex="-1"></a>*You can also manually download the file from [here](http://esapubs.org/archive/ecol/E090/184/PanTHERIA_1-0_WR93_Aug2008.txt)*</span>
<span id="cb45-233"><a href="#cb45-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-234"><a href="#cb45-234" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-235"><a href="#cb45-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-236"><a href="#cb45-236" aria-hidden="true" tabindex="-1"></a>The file can be input into <span class="in">`R`</span> as follows:</span>
<span id="cb45-237"><a href="#cb45-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-238"><a href="#cb45-238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-239"><a href="#cb45-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-240"><a href="#cb45-240" aria-hidden="true" tabindex="-1"></a><span class="in"># read file</span></span>
<span id="cb45-241"><a href="#cb45-241" aria-hidden="true" tabindex="-1"></a><span class="in">pntr_dt &lt;- read.table("pantheria_mammals_data.txt", stringsAsFactors = FALSE, sep = "\t", header = TRUE)</span></span>
<span id="cb45-242"><a href="#cb45-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-243"><a href="#cb45-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-244"><a href="#cb45-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-245"><a href="#cb45-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-246"><a href="#cb45-246" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T, echo= F}</span></span>
<span id="cb45-247"><a href="#cb45-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-248"><a href="#cb45-248" aria-hidden="true" tabindex="-1"></a><span class="in"># read file</span></span>
<span id="cb45-249"><a href="#cb45-249" aria-hidden="true" tabindex="-1"></a><span class="in">pntr_dt &lt;- read.table("./data/pantheria_mammals_data.txt", stringsAsFactors = FALSE, sep = "\t", header = TRUE)</span></span>
<span id="cb45-250"><a href="#cb45-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-251"><a href="#cb45-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-252"><a href="#cb45-252" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-253"><a href="#cb45-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-254"><a href="#cb45-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-255"><a href="#cb45-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-256"><a href="#cb45-256" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-257"><a href="#cb45-257" aria-hidden="true" tabindex="-1"></a><span class="in">head(pntr_dt)</span></span>
<span id="cb45-258"><a href="#cb45-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-259"><a href="#cb45-259" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-260"><a href="#cb45-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-261"><a href="#cb45-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T, echo= F}</span></span>
<span id="cb45-262"><a href="#cb45-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-263"><a href="#cb45-263" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-264"><a href="#cb45-264" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(pntr_dt[1:6, 1:6], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-265"><a href="#cb45-265" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-266"><a href="#cb45-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-267"><a href="#cb45-267" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(pntr_dt[1:6, 7:10], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-268"><a href="#cb45-268" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-269"><a href="#cb45-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-270"><a href="#cb45-270" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-271"><a href="#cb45-271" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-272"><a href="#cb45-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-273"><a href="#cb45-273" aria-hidden="true" tabindex="-1"></a>The file name is quoted and contains the file extension.</span>
<span id="cb45-274"><a href="#cb45-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-275"><a href="#cb45-275" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-276"><a href="#cb45-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-277"><a href="#cb45-277" aria-hidden="true" tabindex="-1"></a>Note that the value -999 is used to define empty cells. We can read this values as *NAs* while importing the data using the 'na.strings' argument:</span>
<span id="cb45-278"><a href="#cb45-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-279"><a href="#cb45-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-280"><a href="#cb45-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-281"><a href="#cb45-281" aria-hidden="true" tabindex="-1"></a><span class="in"># read file</span></span>
<span id="cb45-282"><a href="#cb45-282" aria-hidden="true" tabindex="-1"></a><span class="in">pntr_dt &lt;- read.table("pantheria_mammals_data.txt", sep = "\t", header = TRUE, na.strings = "-999")</span></span>
<span id="cb45-283"><a href="#cb45-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-284"><a href="#cb45-284" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-285"><a href="#cb45-285" aria-hidden="true" tabindex="-1"></a><span class="in">head(pntr_dt)</span></span>
<span id="cb45-286"><a href="#cb45-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-287"><a href="#cb45-287" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-288"><a href="#cb45-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-289"><a href="#cb45-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T, echo= F}</span></span>
<span id="cb45-290"><a href="#cb45-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-291"><a href="#cb45-291" aria-hidden="true" tabindex="-1"></a><span class="in"># read file</span></span>
<span id="cb45-292"><a href="#cb45-292" aria-hidden="true" tabindex="-1"></a><span class="in">pntr_dt &lt;- read.table("./data/pantheria_mammals_data.txt", stringsAsFactors = FALSE, sep = "\t", header = TRUE, na.strings = "-999")</span></span>
<span id="cb45-293"><a href="#cb45-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-294"><a href="#cb45-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-295"><a href="#cb45-295" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-296"><a href="#cb45-296" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(pntr_dt[1:6, 1:6], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-297"><a href="#cb45-297" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-298"><a href="#cb45-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-299"><a href="#cb45-299" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(pntr_dt[1:6, 7:10], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-300"><a href="#cb45-300" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-301"><a href="#cb45-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-302"><a href="#cb45-302" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-303"><a href="#cb45-303" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-304"><a href="#cb45-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-305"><a href="#cb45-305" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Reading &lt;i&gt;.csv&lt;/i&gt; files&lt;/font&gt; </span>
<span id="cb45-306"><a href="#cb45-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-307"><a href="#cb45-307" aria-hidden="true" tabindex="-1"></a>Again, we can download an example file online:</span>
<span id="cb45-308"><a href="#cb45-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-309"><a href="#cb45-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-310"><a href="#cb45-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-311"><a href="#cb45-311" aria-hidden="true" tabindex="-1"></a><span class="in">download.file("http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2013/03/eBird_Taxonomy_v2017_18Aug2017.csv", destfile = "clements_bird_list.csv")</span></span>
<span id="cb45-312"><a href="#cb45-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-313"><a href="#cb45-313" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst &lt;- read.csv("clements_bird_list.csv", stringsAsFactors = FALSE)</span></span>
<span id="cb45-314"><a href="#cb45-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-315"><a href="#cb45-315" aria-hidden="true" tabindex="-1"></a><span class="in">head(clm_lst)</span></span>
<span id="cb45-316"><a href="#cb45-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-317"><a href="#cb45-317" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-318"><a href="#cb45-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-319"><a href="#cb45-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-320"><a href="#cb45-320" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T, echo= F}</span></span>
<span id="cb45-321"><a href="#cb45-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-322"><a href="#cb45-322" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst &lt;- read.csv("./data/clements_bird_list.csv", stringsAsFactors = FALSE)</span></span>
<span id="cb45-323"><a href="#cb45-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-324"><a href="#cb45-324" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-325"><a href="#cb45-325" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst[1:6, 1:5], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-326"><a href="#cb45-326" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-327"><a href="#cb45-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-328"><a href="#cb45-328" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst[1:6, 6:9], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-329"><a href="#cb45-329" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-330"><a href="#cb45-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-331"><a href="#cb45-331" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-332"><a href="#cb45-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-333"><a href="#cb45-333" aria-hidden="true" tabindex="-1"></a>You can also manually download the file from <span class="co">[</span><span class="ot">here</span><span class="co">](http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2013/03/eBird_Taxonomy_v2017_18Aug2017.csv)</span></span>
<span id="cb45-334"><a href="#cb45-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-335"><a href="#cb45-335" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-336"><a href="#cb45-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-337"><a href="#cb45-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-338"><a href="#cb45-338" aria-hidden="true" tabindex="-1"></a>As in the previous example, we can tell <span class="in">`R`</span> how to identify empty cells using the 'na.strings' argument:</span>
<span id="cb45-339"><a href="#cb45-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-340"><a href="#cb45-340" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-341"><a href="#cb45-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-342"><a href="#cb45-342" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst &lt;- read.csv("clements_bird_list.csv", stringsAsFactors = FALSE, na.strings = "")</span></span>
<span id="cb45-343"><a href="#cb45-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-344"><a href="#cb45-344" aria-hidden="true" tabindex="-1"></a><span class="in">head(clm_lst)</span></span>
<span id="cb45-345"><a href="#cb45-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-346"><a href="#cb45-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-347"><a href="#cb45-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-348"><a href="#cb45-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-349"><a href="#cb45-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T, echo= F}</span></span>
<span id="cb45-350"><a href="#cb45-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-351"><a href="#cb45-351" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst &lt;- read.csv("./data/clements_bird_list.csv", stringsAsFactors = FALSE, na.strings = "")</span></span>
<span id="cb45-352"><a href="#cb45-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-353"><a href="#cb45-353" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-354"><a href="#cb45-354" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst[1:6, 1:5], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-355"><a href="#cb45-355" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-356"><a href="#cb45-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-357"><a href="#cb45-357" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst[1:6, 6:9], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-358"><a href="#cb45-358" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-359"><a href="#cb45-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-360"><a href="#cb45-360" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-361"><a href="#cb45-361" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-362"><a href="#cb45-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-363"><a href="#cb45-363" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reading excel files</span></span>
<span id="cb45-364"><a href="#cb45-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-365"><a href="#cb45-365" aria-hidden="true" tabindex="-1"></a>Most researchers enter data into excel spreadsheets. So it would be pretty handy to read the data directly from there. To read *xls* and *xlsx* files we need to install the package "readxl" (there are other packages that can be used but they all work similarly):</span>
<span id="cb45-366"><a href="#cb45-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-367"><a href="#cb45-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,eval=FALSE}</span></span>
<span id="cb45-368"><a href="#cb45-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-369"><a href="#cb45-369" aria-hidden="true" tabindex="-1"></a><span class="in">install.packages(pkgs = "readxl")</span></span>
<span id="cb45-370"><a href="#cb45-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-371"><a href="#cb45-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-372"><a href="#cb45-372" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-373"><a href="#cb45-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-374"><a href="#cb45-374" aria-hidden="true" tabindex="-1"></a>And load it: </span>
<span id="cb45-375"><a href="#cb45-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-376"><a href="#cb45-376" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F}</span></span>
<span id="cb45-377"><a href="#cb45-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-378"><a href="#cb45-378" aria-hidden="true" tabindex="-1"></a><span class="in">library(readxl)</span></span>
<span id="cb45-379"><a href="#cb45-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-380"><a href="#cb45-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-381"><a href="#cb45-381" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-382"><a href="#cb45-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-383"><a href="#cb45-383" aria-hidden="true" tabindex="-1"></a>As we did above, download an example file from an online repository. In this case is the same Clements bird taxonomy list in *xlsx* format:</span>
<span id="cb45-384"><a href="#cb45-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-385"><a href="#cb45-385" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-386"><a href="#cb45-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-387"><a href="#cb45-387" aria-hidden="true" tabindex="-1"></a><span class="in">download.file("http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2017/08/eBird_Taxonomy_v2017_18Aug2017.xlsx", destfile = "clements_bird_list.xlsx")</span></span>
<span id="cb45-388"><a href="#cb45-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-389"><a href="#cb45-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-390"><a href="#cb45-390" aria-hidden="true" tabindex="-1"></a>You can also manually download the file from <span class="co">[</span><span class="ot">here</span><span class="co">](http://www.birds.cornell.edu/clementschecklist/wp-content/uploads/2017/08/eBird_Taxonomy_v2017_18Aug2017.xlsx)</span></span>
<span id="cb45-391"><a href="#cb45-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-392"><a href="#cb45-392" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-393"><a href="#cb45-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-394"><a href="#cb45-394" aria-hidden="true" tabindex="-1"></a>Now we can use the function <span class="in">`read_excel()`</span> to read the file: </span>
<span id="cb45-395"><a href="#cb45-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-396"><a href="#cb45-396" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= T}</span></span>
<span id="cb45-397"><a href="#cb45-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-398"><a href="#cb45-398" aria-hidden="true" tabindex="-1"></a><span class="in"># read file</span></span>
<span id="cb45-399"><a href="#cb45-399" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst2 &lt;- read_excel("clements_bird_list.xlsx", sheet = 1)</span></span>
<span id="cb45-400"><a href="#cb45-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-401"><a href="#cb45-401" aria-hidden="true" tabindex="-1"></a><span class="in">head(clm_lst2)</span></span>
<span id="cb45-402"><a href="#cb45-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-403"><a href="#cb45-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-404"><a href="#cb45-404" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = T, echo= F}</span></span>
<span id="cb45-405"><a href="#cb45-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-406"><a href="#cb45-406" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst2 &lt;- read_excel("./data/clements_bird_list.xlsx", sheet = 1)</span></span>
<span id="cb45-407"><a href="#cb45-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-408"><a href="#cb45-408" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-409"><a href="#cb45-409" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst2[1:6, 1:5], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-410"><a href="#cb45-410" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-411"><a href="#cb45-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-412"><a href="#cb45-412" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst2[1:6, 6:9], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-413"><a href="#cb45-413" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-414"><a href="#cb45-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-415"><a href="#cb45-415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-416"><a href="#cb45-416" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-417"><a href="#cb45-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-418"><a href="#cb45-418" aria-hidden="true" tabindex="-1"></a>You need to specify the file name (including extension) and the excel sheet (tab) name. <span class="in">`read_excel()`</span> auto detects the format from the file extension. The functions <span class="in">`read_xls()`</span> and <span class="in">`read_xlsx()`</span> can be used to read files without extension.</span>
<span id="cb45-419"><a href="#cb45-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-420"><a href="#cb45-420" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-421"><a href="#cb45-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-422"><a href="#cb45-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-423"><a href="#cb45-423" aria-hidden="true" tabindex="-1"></a>&lt;div class="alert alert-info"&gt;</span>
<span id="cb45-424"><a href="#cb45-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-425"><a href="#cb45-425" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Exercise 1&lt;/font&gt; </span>
<span id="cb45-426"><a href="#cb45-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-427"><a href="#cb45-427" aria-hidden="true" tabindex="-1"></a>All default functions to input data into <span class="in">`R`</span> have a counterpart to export the same type of data. The names of these other functions are similar to the ones for reading data, although they typically start with "write" or "save".</span>
<span id="cb45-428"><a href="#cb45-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-429"><a href="#cb45-429" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-430"><a href="#cb45-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-431"><a href="#cb45-431" aria-hidden="true" tabindex="-1"></a>1.1 What are the names of the default functions for exporting the data formats we used above? (hint: try <span class="in">`apropos`</span> to check which functions are available) </span>
<span id="cb45-432"><a href="#cb45-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-433"><a href="#cb45-433" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-434"><a href="#cb45-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-435"><a href="#cb45-435" aria-hidden="true" tabindex="-1"></a>1.2 Export the mammals data as a *.csv* file </span>
<span id="cb45-436"><a href="#cb45-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-437"><a href="#cb45-437" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-438"><a href="#cb45-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-439"><a href="#cb45-439" aria-hidden="true" tabindex="-1"></a>1.3 Export the mammals data again, this time excluding the row names</span>
<span id="cb45-440"><a href="#cb45-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-441"><a href="#cb45-441" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-442"><a href="#cb45-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-443"><a href="#cb45-443" aria-hidden="true" tabindex="-1"></a>1.4 Read the *.csv* file using <span class="in">`read.table`</span></span>
<span id="cb45-444"><a href="#cb45-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-445"><a href="#cb45-445" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-446"><a href="#cb45-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-447"><a href="#cb45-447" aria-hidden="true" tabindex="-1"></a>1.5 What other packages can import excel files into <span class="in">`R`</span>?</span>
<span id="cb45-448"><a href="#cb45-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-449"><a href="#cb45-449" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-450"><a href="#cb45-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-451"><a href="#cb45-451" aria-hidden="true" tabindex="-1"></a>1.6 Can you export an excel file or add data to an existing excel file from <span class="in">`R`</span>? </span>
<span id="cb45-452"><a href="#cb45-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-453"><a href="#cb45-453" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt; </span>
<span id="cb45-454"><a href="#cb45-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-455"><a href="#cb45-455" aria-hidden="true" tabindex="-1"></a>1.7 Using the "clements_bird_list.csv" file, how would you tell <span class="in">`R`</span> to read both "Rheiformes" and "Ostriches" as empty cells (while still reading empty cells as empty cells)? </span>
<span id="cb45-456"><a href="#cb45-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-457"><a href="#cb45-457" aria-hidden="true" tabindex="-1"></a>&lt;/div&gt;</span>
<span id="cb45-458"><a href="#cb45-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-459"><a href="#cb45-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-460"><a href="#cb45-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = F, echo= F}</span></span>
<span id="cb45-461"><a href="#cb45-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-462"><a href="#cb45-462" aria-hidden="true" tabindex="-1"></a><span class="in"># 1.4</span></span>
<span id="cb45-463"><a href="#cb45-463" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst3 &lt;- read.table("clements_bird_list.csv", stringsAsFactors = FALSE, header = TRUE, sep = ",", fill = T)</span></span>
<span id="cb45-464"><a href="#cb45-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-465"><a href="#cb45-465" aria-hidden="true" tabindex="-1"></a><span class="in"># 1.7</span></span>
<span id="cb45-466"><a href="#cb45-466" aria-hidden="true" tabindex="-1"></a><span class="in">clm_lst &lt;- read.csv("clements_bird_list.csv", stringsAsFactors = FALSE, na.strings = c("",  "Rheiformes", "Ostriches"))</span></span>
<span id="cb45-467"><a href="#cb45-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-468"><a href="#cb45-468" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-469"><a href="#cb45-469" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst[1:6, 1:5], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-470"><a href="#cb45-470" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-471"><a href="#cb45-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-472"><a href="#cb45-472" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(clm_lst[1:6, 6:9], row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-473"><a href="#cb45-473" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-474"><a href="#cb45-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-475"><a href="#cb45-475" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-476"><a href="#cb45-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-477"><a href="#cb45-477" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb45-478"><a href="#cb45-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-479"><a href="#cb45-479" aria-hidden="true" tabindex="-1"></a><span class="fu"># Formatting data</span></span>
<span id="cb45-480"><a href="#cb45-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-481"><a href="#cb45-481" aria-hidden="true" tabindex="-1"></a>This section deals with organizing your data in a way that simplify its handling, exploration and analysis. As you can probably guess, the more consistent things are done, the more predictable they become. This also applies to data. If data is organized with the same logic, you can expect the same type of manipulations and analyses to be applicable on different data sets. Organizing the data is a key  (but usually neglected) aspect of the data analysis workflow. When data is properly organized you will spend much less time on formatting and more time on the actual analytic questions.</span>
<span id="cb45-482"><a href="#cb45-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-483"><a href="#cb45-483" aria-hidden="true" tabindex="-1"></a>When possible, we will run the data formatting examples using both the 'tidyr' package and the base <span class="in">`R`</span> functions.</span>
<span id="cb45-484"><a href="#cb45-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-485"><a href="#cb45-485" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tidy data</span></span>
<span id="cb45-486"><a href="#cb45-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-487"><a href="#cb45-487" aria-hidden="true" tabindex="-1"></a>"Tidy data" is a logic for organizing data sets in a consistent and intuitive way. To run some of the code below you will need the 'tidyr' and 'dplyr' packages, which can be installed/loaded as follows: </span>
<span id="cb45-488"><a href="#cb45-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-489"><a href="#cb45-489" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,eval=FALSE}</span></span>
<span id="cb45-490"><a href="#cb45-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-491"><a href="#cb45-491" aria-hidden="true" tabindex="-1"></a><span class="in">install.packages(pkgs = "tidyr")</span></span>
<span id="cb45-492"><a href="#cb45-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-493"><a href="#cb45-493" aria-hidden="true" tabindex="-1"></a><span class="in">install.packages(pkgs = "dplyr")</span></span>
<span id="cb45-494"><a href="#cb45-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-495"><a href="#cb45-495" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyr)</span></span>
<span id="cb45-496"><a href="#cb45-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-497"><a href="#cb45-497" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb45-498"><a href="#cb45-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-499"><a href="#cb45-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-500"><a href="#cb45-500" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-501"><a href="#cb45-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-502"><a href="#cb45-502" aria-hidden="true" tabindex="-1"></a>The same data can be represented in many ways. In the example below each data set shows exactly the same values of four variables *country*, *year*, *population*, and *cases*, but in each data set values are organized in a different way. The data shows the number of tuberculosis cases in Afghanistan, Brazil, and China between 1999 and 2000:</span>
<span id="cb45-503"><a href="#cb45-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-504"><a href="#cb45-504" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-505"><a href="#cb45-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-506"><a href="#cb45-506" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table1)</span></span>
<span id="cb45-507"><a href="#cb45-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-508"><a href="#cb45-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-509"><a href="#cb45-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-510"><a href="#cb45-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-511"><a href="#cb45-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-512"><a href="#cb45-512" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-513"><a href="#cb45-513" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table1, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-514"><a href="#cb45-514" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-515"><a href="#cb45-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-516"><a href="#cb45-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-517"><a href="#cb45-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-518"><a href="#cb45-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-519"><a href="#cb45-519" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-520"><a href="#cb45-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-521"><a href="#cb45-521" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table2)</span></span>
<span id="cb45-522"><a href="#cb45-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-523"><a href="#cb45-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-524"><a href="#cb45-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-525"><a href="#cb45-525" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-526"><a href="#cb45-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-527"><a href="#cb45-527" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-528"><a href="#cb45-528" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table2, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-529"><a href="#cb45-529" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-530"><a href="#cb45-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-531"><a href="#cb45-531" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-532"><a href="#cb45-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-533"><a href="#cb45-533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-534"><a href="#cb45-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-535"><a href="#cb45-535" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table3)</span></span>
<span id="cb45-536"><a href="#cb45-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-537"><a href="#cb45-537" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-538"><a href="#cb45-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-539"><a href="#cb45-539" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-540"><a href="#cb45-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-541"><a href="#cb45-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-542"><a href="#cb45-542" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-543"><a href="#cb45-543" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table3, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-544"><a href="#cb45-544" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-545"><a href="#cb45-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-546"><a href="#cb45-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-547"><a href="#cb45-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-548"><a href="#cb45-548" aria-hidden="true" tabindex="-1"></a>Or even spread across 2 different data sets:</span>
<span id="cb45-549"><a href="#cb45-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-550"><a href="#cb45-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-551"><a href="#cb45-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-552"><a href="#cb45-552" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table4a)</span></span>
<span id="cb45-553"><a href="#cb45-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-554"><a href="#cb45-554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-555"><a href="#cb45-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-556"><a href="#cb45-556" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-557"><a href="#cb45-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-558"><a href="#cb45-558" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-559"><a href="#cb45-559" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table4a, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-560"><a href="#cb45-560" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-561"><a href="#cb45-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-562"><a href="#cb45-562" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-563"><a href="#cb45-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-564"><a href="#cb45-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-565"><a href="#cb45-565" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-566"><a href="#cb45-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-567"><a href="#cb45-567" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table4b)</span></span>
<span id="cb45-568"><a href="#cb45-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-569"><a href="#cb45-569" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-570"><a href="#cb45-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-571"><a href="#cb45-571" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-572"><a href="#cb45-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-573"><a href="#cb45-573" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-574"><a href="#cb45-574" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table4b, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-575"><a href="#cb45-575" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-576"><a href="#cb45-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-577"><a href="#cb45-577" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-578"><a href="#cb45-578" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-579"><a href="#cb45-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-580"><a href="#cb45-580" aria-hidden="true" tabindex="-1"></a>All these data sets contained the same underlying data. However, they are not equally easy to use.</span>
<span id="cb45-581"><a href="#cb45-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-582"><a href="#cb45-582" aria-hidden="true" tabindex="-1"></a>There are three interrelated rules to make a data set tidy:</span>
<span id="cb45-583"><a href="#cb45-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-584"><a href="#cb45-584" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Each variable must have its own column</span>
<span id="cb45-585"><a href="#cb45-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-586"><a href="#cb45-586" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Each observation must have its own row</span>
<span id="cb45-587"><a href="#cb45-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-588"><a href="#cb45-588" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Each value must have its own cell</span>
<span id="cb45-589"><a href="#cb45-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-590"><a href="#cb45-590" aria-hidden="true" tabindex="-1"></a>This figure shows the rules visually:</span>
<span id="cb45-591"><a href="#cb45-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-592"><a href="#cb45-592" aria-hidden="true" tabindex="-1"></a>&lt;img src="tidy-1.png" alt="tidy data" height="500" width="750"&gt;</span>
<span id="cb45-593"><a href="#cb45-593" aria-hidden="true" tabindex="-1"></a>&lt;font size="2"&gt;* Modified from &lt;i&gt;R for Data Science&lt;/i&gt;&lt;/font&gt;</span>
<span id="cb45-594"><a href="#cb45-594" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-595"><a href="#cb45-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-596"><a href="#cb45-596" aria-hidden="true" tabindex="-1"></a>These three rules are interrelated because it's impossible to only satisfy two of the three. That interrelationship leads to an even simpler set of practical instructions:</span>
<span id="cb45-597"><a href="#cb45-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-598"><a href="#cb45-598" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Put each data set in a data frame</span>
<span id="cb45-599"><a href="#cb45-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-600"><a href="#cb45-600" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Put each variable in a column</span>
<span id="cb45-601"><a href="#cb45-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-602"><a href="#cb45-602" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-603"><a href="#cb45-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-604"><a href="#cb45-604" aria-hidden="true" tabindex="-1"></a>In the example above, only <span class="in">`table1`</span> is tidy. It's the only representation where each column is a variable. There are two main advantages of formatting the data in this way:</span>
<span id="cb45-605"><a href="#cb45-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-606"><a href="#cb45-606" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>If you have a consistent data structure, it's easier to learn the tools that work with it because they have an underlying uniformity</span>
<span id="cb45-607"><a href="#cb45-607" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb45-608"><a href="#cb45-608" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Placing variables in columns fits well <span class="in">`R`</span>'s vectorized nature. As we have seen, built-in <span class="in">`R`</span> functions work with vectors of values. That makes transforming tidy data feel particularly natural</span>
<span id="cb45-609"><a href="#cb45-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-610"><a href="#cb45-610" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-611"><a href="#cb45-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-612"><a href="#cb45-612" aria-hidden="true" tabindex="-1"></a>&lt;div class="alert alert-info"&gt;</span>
<span id="cb45-613"><a href="#cb45-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-614"><a href="#cb45-614" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Exercise 2&lt;/font&gt; </span>
<span id="cb45-615"><a href="#cb45-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-616"><a href="#cb45-616" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-617"><a href="#cb45-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-618"><a href="#cb45-618" aria-hidden="true" tabindex="-1"></a>2.1 Describe how the variables and observations are organized in each of the sample data frames</span>
<span id="cb45-619"><a href="#cb45-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-620"><a href="#cb45-620" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-621"><a href="#cb45-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-622"><a href="#cb45-622" aria-hidden="true" tabindex="-1"></a>2.2 Calculate the rate of cases per 10000 people for "table1", "table2" and "table4a"/"table4b" </span>
<span id="cb45-623"><a href="#cb45-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-624"><a href="#cb45-624" aria-hidden="true" tabindex="-1"></a>&lt;/div&gt;</span>
<span id="cb45-625"><a href="#cb45-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-626"><a href="#cb45-626" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb45-627"><a href="#cb45-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-628"><a href="#cb45-628" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gathering data</span></span>
<span id="cb45-629"><a href="#cb45-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-630"><a href="#cb45-630" aria-hidden="true" tabindex="-1"></a>A common problem is a data set where some of the column names are not names of variables, but values of a variable. Take "table4a": the column names 1999 and 2000 represent values of the year variable, and each row represents two observations, not one:</span>
<span id="cb45-631"><a href="#cb45-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-632"><a href="#cb45-632" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-633"><a href="#cb45-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-634"><a href="#cb45-634" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table4a)</span></span>
<span id="cb45-635"><a href="#cb45-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-636"><a href="#cb45-636" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-637"><a href="#cb45-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-638"><a href="#cb45-638" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-639"><a href="#cb45-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-640"><a href="#cb45-640" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-641"><a href="#cb45-641" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table4a, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-642"><a href="#cb45-642" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-643"><a href="#cb45-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-644"><a href="#cb45-644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-645"><a href="#cb45-645" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-646"><a href="#cb45-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-647"><a href="#cb45-647" aria-hidden="true" tabindex="-1"></a>To tidy a data set like this, we need to __gather__ those columns into a new pair of variables. To do this we need three parameters:</span>
<span id="cb45-648"><a href="#cb45-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-649"><a href="#cb45-649" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The set of columns that represent values, not variables. In this example, </span>
<span id="cb45-650"><a href="#cb45-650" aria-hidden="true" tabindex="-1"></a>  those are the columns <span class="in">`1999`</span> and <span class="in">`2000`</span></span>
<span id="cb45-651"><a href="#cb45-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-652"><a href="#cb45-652" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The name of the variable whose values form the column names. In the 'tidyr' syntax that is called  the <span class="in">`key`</span>, which in this case is <span class="in">`year`</span></span>
<span id="cb45-653"><a href="#cb45-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-654"><a href="#cb45-654" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The name of the variable whose values are spread over the cells. In the 'tidyr' syntax that is called that <span class="in">`value`</span>, which in this case is the number of <span class="in">`cases`</span></span>
<span id="cb45-655"><a href="#cb45-655" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-656"><a href="#cb45-656" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-657"><a href="#cb45-657" aria-hidden="true" tabindex="-1"></a>These parameters can be used to create a tidy data set using the function <span class="in">`gather()`</span>:</span>
<span id="cb45-658"><a href="#cb45-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-659"><a href="#cb45-659" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-660"><a href="#cb45-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-661"><a href="#cb45-661" aria-hidden="true" tabindex="-1"></a><span class="in">gather(table4a, key = "year", value = "cases", `1999`, `2000`)</span></span>
<span id="cb45-662"><a href="#cb45-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-663"><a href="#cb45-663" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-664"><a href="#cb45-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-665"><a href="#cb45-665" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-666"><a href="#cb45-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-667"><a href="#cb45-667" aria-hidden="true" tabindex="-1"></a><span class="in">g1 &lt;- gather(table4a, key = "year", value = "cases", `1999`, `2000`)</span></span>
<span id="cb45-668"><a href="#cb45-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-669"><a href="#cb45-669" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-670"><a href="#cb45-670" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g1, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-671"><a href="#cb45-671" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-672"><a href="#cb45-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-673"><a href="#cb45-673" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-674"><a href="#cb45-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-675"><a href="#cb45-675" aria-hidden="true" tabindex="-1"></a>We can visualize this formatting as follows:</span>
<span id="cb45-676"><a href="#cb45-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-677"><a href="#cb45-677" aria-hidden="true" tabindex="-1"></a>&lt;img src="gather.png" alt="gather data" height="500" width="850"&gt;</span>
<span id="cb45-678"><a href="#cb45-678" aria-hidden="true" tabindex="-1"></a>&lt;font size="2"&gt;* Modified from &lt;i&gt;R for Data Science&lt;/i&gt;&lt;/font&gt;</span>
<span id="cb45-679"><a href="#cb45-679" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-680"><a href="#cb45-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-681"><a href="#cb45-681" aria-hidden="true" tabindex="-1"></a> <span class="in">`gather()`</span> can also be used to tidy <span class="in">`table4b`</span>. The only difference is the variable stored in the cell values:</span>
<span id="cb45-682"><a href="#cb45-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-683"><a href="#cb45-683" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-684"><a href="#cb45-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-685"><a href="#cb45-685" aria-hidden="true" tabindex="-1"></a><span class="in">gather(data = table4b, key = "year", value = "population", `1999`, `2000`)</span></span>
<span id="cb45-686"><a href="#cb45-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-687"><a href="#cb45-687" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-688"><a href="#cb45-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-689"><a href="#cb45-689" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-690"><a href="#cb45-690" aria-hidden="true" tabindex="-1"></a><span class="in">g2 &lt;- gather(data = table4b, key = "year", value = "population",`1999`, `2000`)</span></span>
<span id="cb45-691"><a href="#cb45-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-692"><a href="#cb45-692" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-693"><a href="#cb45-693" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g2, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-694"><a href="#cb45-694" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-695"><a href="#cb45-695" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-696"><a href="#cb45-696" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-697"><a href="#cb45-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-698"><a href="#cb45-698" aria-hidden="true" tabindex="-1"></a>To combine the tidied versions of <span class="in">`table4a`</span> and <span class="in">`table4b`</span> into a single data frame (or 'tibble'), we can either  use <span class="in">`dplyr::left_join()`</span> or <span class="in">`merge()`</span> from base <span class="in">`R`</span>:</span>
<span id="cb45-699"><a href="#cb45-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-700"><a href="#cb45-700" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-701"><a href="#cb45-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-702"><a href="#cb45-702" aria-hidden="true" tabindex="-1"></a><span class="in">tidy4a &lt;- gather(table4a, key = "year", value = "cases", `1999`, `2000`)</span></span>
<span id="cb45-703"><a href="#cb45-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-704"><a href="#cb45-704" aria-hidden="true" tabindex="-1"></a><span class="in">tidy4b &lt;- gather(table4b, key = "year", value = "population", `1999`, `2000`)</span></span>
<span id="cb45-705"><a href="#cb45-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-706"><a href="#cb45-706" aria-hidden="true" tabindex="-1"></a><span class="in">left_join(x = tidy4a, y = tidy4b, by = c("country", "year"))</span></span>
<span id="cb45-707"><a href="#cb45-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-708"><a href="#cb45-708" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-709"><a href="#cb45-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-710"><a href="#cb45-710" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-711"><a href="#cb45-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-712"><a href="#cb45-712" aria-hidden="true" tabindex="-1"></a><span class="in">tidy4a &lt;- gather(table4a, `1999`, `2000`, key = "year", value = "cases")</span></span>
<span id="cb45-713"><a href="#cb45-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-714"><a href="#cb45-714" aria-hidden="true" tabindex="-1"></a><span class="in">tidy4b &lt;- gather(table4b,`1999`, `2000`, key = "year", value = "population")</span></span>
<span id="cb45-715"><a href="#cb45-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-716"><a href="#cb45-716" aria-hidden="true" tabindex="-1"></a><span class="in">g3 &lt;- left_join(x = tidy4a, y = tidy4b, by = c("country", "year"))</span></span>
<span id="cb45-717"><a href="#cb45-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-718"><a href="#cb45-718" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-719"><a href="#cb45-719" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g3, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-720"><a href="#cb45-720" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-721"><a href="#cb45-721" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-722"><a href="#cb45-722" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-723"><a href="#cb45-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-724"><a href="#cb45-724" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-725"><a href="#cb45-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-726"><a href="#cb45-726" aria-hidden="true" tabindex="-1"></a><span class="in">merge(x = tidy4a, y =  tidy4b, by = c("country", "year"))</span></span>
<span id="cb45-727"><a href="#cb45-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-728"><a href="#cb45-728" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-729"><a href="#cb45-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-730"><a href="#cb45-730" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-731"><a href="#cb45-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-732"><a href="#cb45-732" aria-hidden="true" tabindex="-1"></a><span class="in">g4 &lt;- merge(tidy4a, tidy4b)</span></span>
<span id="cb45-733"><a href="#cb45-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-734"><a href="#cb45-734" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-735"><a href="#cb45-735" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g4, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-736"><a href="#cb45-736" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-737"><a href="#cb45-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-738"><a href="#cb45-738" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-739"><a href="#cb45-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-740"><a href="#cb45-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-741"><a href="#cb45-741" aria-hidden="true" tabindex="-1"></a><span class="fu">## Spreading</span></span>
<span id="cb45-742"><a href="#cb45-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-743"><a href="#cb45-743" aria-hidden="true" tabindex="-1"></a>Spreading is the opposite of gathering. You use it when an observation is scattered across multiple rows. For example, in <span class="in">`table2`</span> an observation is a country in a year, but each observation is spread across two rows:</span>
<span id="cb45-744"><a href="#cb45-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-745"><a href="#cb45-745" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-746"><a href="#cb45-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-747"><a href="#cb45-747" aria-hidden="true" tabindex="-1"></a><span class="in">table2</span></span>
<span id="cb45-748"><a href="#cb45-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-749"><a href="#cb45-749" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-750"><a href="#cb45-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-751"><a href="#cb45-751" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-752"><a href="#cb45-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-753"><a href="#cb45-753" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-754"><a href="#cb45-754" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table2, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-755"><a href="#cb45-755" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-756"><a href="#cb45-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-757"><a href="#cb45-757" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-758"><a href="#cb45-758" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-759"><a href="#cb45-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-760"><a href="#cb45-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-761"><a href="#cb45-761" aria-hidden="true" tabindex="-1"></a>To tidy this data set up, we only need two parameters:</span>
<span id="cb45-762"><a href="#cb45-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-763"><a href="#cb45-763" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The column that contains variable names, the <span class="in">`key`</span> column. Here, it's </span>
<span id="cb45-764"><a href="#cb45-764" aria-hidden="true" tabindex="-1"></a>  <span class="in">`type`</span>.</span>
<span id="cb45-765"><a href="#cb45-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-766"><a href="#cb45-766" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>The column that contains values forms multiple variables, the <span class="in">`value`</span></span>
<span id="cb45-767"><a href="#cb45-767" aria-hidden="true" tabindex="-1"></a>  column. Here it's <span class="in">`count`</span>.</span>
<span id="cb45-768"><a href="#cb45-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-769"><a href="#cb45-769" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-770"><a href="#cb45-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-771"><a href="#cb45-771" aria-hidden="true" tabindex="-1"></a>To do this we can use <span class="in">`spread()`</span>:</span>
<span id="cb45-772"><a href="#cb45-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-773"><a href="#cb45-773" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-774"><a href="#cb45-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-775"><a href="#cb45-775" aria-hidden="true" tabindex="-1"></a><span class="in">spread(table2, key = "type", value = "count")</span></span>
<span id="cb45-776"><a href="#cb45-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-777"><a href="#cb45-777" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-778"><a href="#cb45-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-779"><a href="#cb45-779" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-780"><a href="#cb45-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-781"><a href="#cb45-781" aria-hidden="true" tabindex="-1"></a><span class="in">sp1 &lt;- spread(table2, key = "type", value = "count")</span></span>
<span id="cb45-782"><a href="#cb45-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-783"><a href="#cb45-783" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-784"><a href="#cb45-784" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(sp1, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-785"><a href="#cb45-785" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-786"><a href="#cb45-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-787"><a href="#cb45-787" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-788"><a href="#cb45-788" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-789"><a href="#cb45-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-790"><a href="#cb45-790" aria-hidden="true" tabindex="-1"></a>which can be visualized as follows:</span>
<span id="cb45-791"><a href="#cb45-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-792"><a href="#cb45-792" aria-hidden="true" tabindex="-1"></a>&lt;img src="spreading.png" alt="spreading data" height="500" width="850"&gt;</span>
<span id="cb45-793"><a href="#cb45-793" aria-hidden="true" tabindex="-1"></a>&lt;font size="2"&gt;* Modified from &lt;i&gt;R for Data Science&lt;/i&gt;&lt;/font&gt;</span>
<span id="cb45-794"><a href="#cb45-794" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-795"><a href="#cb45-795" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-796"><a href="#cb45-796" aria-hidden="true" tabindex="-1"></a><span class="in">`spread()`</span> and <span class="in">`gather()`</span> are complementary functions. <span class="in">`gather()`</span> makes wide tables narrower and longer; <span class="in">`spread()`</span> makes long tables shorter and wider.</span>
<span id="cb45-797"><a href="#cb45-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-798"><a href="#cb45-798" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-799"><a href="#cb45-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-800"><a href="#cb45-800" aria-hidden="true" tabindex="-1"></a>&lt;div class="alert alert-info"&gt;</span>
<span id="cb45-801"><a href="#cb45-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-802"><a href="#cb45-802" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Exercise 3&lt;/font&gt; </span>
<span id="cb45-803"><a href="#cb45-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-804"><a href="#cb45-804" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-805"><a href="#cb45-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-806"><a href="#cb45-806" aria-hidden="true" tabindex="-1"></a>3.1 Tidy up the following data set on tree height for 2 species:</span>
<span id="cb45-807"><a href="#cb45-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-810"><a href="#cb45-810" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb45-811"><a href="#cb45-811" aria-hidden="true" tabindex="-1"></a>plnt_sz <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">forest =</span> <span class="fu">c</span>(<span class="st">"old_growth"</span>, <span class="st">"disturbed"</span>), </span>
<span id="cb45-812"><a href="#cb45-812" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Species_1 =</span> <span class="fu">c</span>(<span class="dv">154</span>, <span class="dv">160</span>), </span>
<span id="cb45-813"><a href="#cb45-813" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Species_2 =</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">113</span>))</span>
<span id="cb45-814"><a href="#cb45-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-815"><a href="#cb45-815" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-816"><a href="#cb45-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-817"><a href="#cb45-817" aria-hidden="true" tabindex="-1"></a>&lt;/div&gt;</span>
<span id="cb45-818"><a href="#cb45-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-819"><a href="#cb45-819" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-820"><a href="#cb45-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-821"><a href="#cb45-821" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb45-822"><a href="#cb45-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-823"><a href="#cb45-823" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Separating and uniting&lt;/font&gt;  </span>
<span id="cb45-824"><a href="#cb45-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-825"><a href="#cb45-825" aria-hidden="true" tabindex="-1"></a>So far we have fixed "table2" and "table4", but not "table3". "table3" has a different problem: we have one column (*rate*) that contains two variables (*cases and *population*). This can be fixed using the <span class="in">`separate()`</span> function . We will also look at its complement<span class="in">`unite()`</span>, which is used when a single variable is spread across multiple columns.</span>
<span id="cb45-826"><a href="#cb45-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-827"><a href="#cb45-827" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-828"><a href="#cb45-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-829"><a href="#cb45-829" aria-hidden="true" tabindex="-1"></a><span class="fu">## Separate</span></span>
<span id="cb45-830"><a href="#cb45-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-831"><a href="#cb45-831" aria-hidden="true" tabindex="-1"></a><span class="in">`separate()`</span> pulls apart one column into multiple columns, by splitting wherever a separator character appears. Take <span class="in">`table3`</span>:</span>
<span id="cb45-832"><a href="#cb45-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-833"><a href="#cb45-833" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T}</span></span>
<span id="cb45-834"><a href="#cb45-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-835"><a href="#cb45-835" aria-hidden="true" tabindex="-1"></a><span class="in">as.data.frame(table3)</span></span>
<span id="cb45-836"><a href="#cb45-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-837"><a href="#cb45-837" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-838"><a href="#cb45-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-839"><a href="#cb45-839" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-840"><a href="#cb45-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-841"><a href="#cb45-841" aria-hidden="true" tabindex="-1"></a><span class="in"># check structure</span></span>
<span id="cb45-842"><a href="#cb45-842" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table3, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-843"><a href="#cb45-843" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-844"><a href="#cb45-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-845"><a href="#cb45-845" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-846"><a href="#cb45-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-847"><a href="#cb45-847" aria-hidden="true" tabindex="-1"></a>Visually it does something like this:</span>
<span id="cb45-848"><a href="#cb45-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-849"><a href="#cb45-849" aria-hidden="true" tabindex="-1"></a>&lt;img src="separate.png" alt="separate data" height="500" width="850"&gt;</span>
<span id="cb45-850"><a href="#cb45-850" aria-hidden="true" tabindex="-1"></a>&lt;font size="2"&gt;* Modified from &lt;i&gt;R for Data Science&lt;/i&gt;&lt;/font&gt;</span>
<span id="cb45-851"><a href="#cb45-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-852"><a href="#cb45-852" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-853"><a href="#cb45-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-854"><a href="#cb45-854" aria-hidden="true" tabindex="-1"></a>The *rate* column contains both *cases* and *population* variables, and we need to split it into two variables. <span class="in">`separate()`</span> takes the name of the column to separate, and the names of the new columns to be created: </span>
<span id="cb45-855"><a href="#cb45-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-856"><a href="#cb45-856" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F, echo=T} </span></span>
<span id="cb45-857"><a href="#cb45-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-858"><a href="#cb45-858" aria-hidden="true" tabindex="-1"></a><span class="in">separate(data = table3, col =  rate, into = c("cases", "population"))</span></span>
<span id="cb45-859"><a href="#cb45-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-860"><a href="#cb45-860" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-861"><a href="#cb45-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-862"><a href="#cb45-862" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-863"><a href="#cb45-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-864"><a href="#cb45-864" aria-hidden="true" tabindex="-1"></a><span class="in">g5 &lt;- separate(data = table3, col =  rate, into = c("cases", "population"))</span></span>
<span id="cb45-865"><a href="#cb45-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-866"><a href="#cb45-866" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g5, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-867"><a href="#cb45-867" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-868"><a href="#cb45-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-869"><a href="#cb45-869" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-870"><a href="#cb45-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-871"><a href="#cb45-871" aria-hidden="true" tabindex="-1"></a>By default, <span class="in">`separate()`</span> will split based on any non-alphanumeric character (i.e. a character that isn't a number or letter). In the code above, <span class="in">`separate()`</span> split the values of *rate* at the forward slash characters. This can be explicitly stated (to avoid any errors):</span>
<span id="cb45-872"><a href="#cb45-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-873"><a href="#cb45-873" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = FALSE}</span></span>
<span id="cb45-874"><a href="#cb45-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-875"><a href="#cb45-875" aria-hidden="true" tabindex="-1"></a><span class="in">tb3 &lt;- separate(data = table3, col = rate,  into = c("cases", "population"), sep = "/")</span></span>
<span id="cb45-876"><a href="#cb45-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-877"><a href="#cb45-877" aria-hidden="true" tabindex="-1"></a><span class="in">tb3 </span></span>
<span id="cb45-878"><a href="#cb45-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-879"><a href="#cb45-879" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-880"><a href="#cb45-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-881"><a href="#cb45-881" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-882"><a href="#cb45-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-883"><a href="#cb45-883" aria-hidden="true" tabindex="-1"></a><span class="in">g6 &lt;- separate(data = table3, col = rate,  into = c("cases", "population"), sep = "/")</span></span>
<span id="cb45-884"><a href="#cb45-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-885"><a href="#cb45-885" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g6, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-886"><a href="#cb45-886" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-887"><a href="#cb45-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-888"><a href="#cb45-888" aria-hidden="true" tabindex="-1"></a><span class="in">str(g6)</span></span>
<span id="cb45-889"><a href="#cb45-889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-890"><a href="#cb45-890" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-891"><a href="#cb45-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-892"><a href="#cb45-892" aria-hidden="true" tabindex="-1"></a>Note that the *case* and *population* are character columns. By default <span class="in">`separate()`</span> leaves the type of the new columns as in the original one. In this case this is not ideal as those really are numbers. We can ask <span class="in">`separate()`</span> to try and convert to better types using <span class="in">`convert = TRUE`</span>:</span>
<span id="cb45-893"><a href="#cb45-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-894"><a href="#cb45-894" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=T}</span></span>
<span id="cb45-895"><a href="#cb45-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-896"><a href="#cb45-896" aria-hidden="true" tabindex="-1"></a><span class="in">tb3 &lt;- separate(data = table3, col = rate, into = c("cases", "population"), convert = TRUE)</span></span>
<span id="cb45-897"><a href="#cb45-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-898"><a href="#cb45-898" aria-hidden="true" tabindex="-1"></a><span class="in">str(tb3)</span></span>
<span id="cb45-899"><a href="#cb45-899" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-900"><a href="#cb45-900" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-901"><a href="#cb45-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-902"><a href="#cb45-902" aria-hidden="true" tabindex="-1"></a>You can also pass a vector of integers to <span class="in">`sep`</span>, which will be interpreted as positions to split at. Positive values start at 1 on the far-left of the strings; negative value start at -1 on the far-right of the strings. When using integers to separate strings, the length of <span class="in">`sep`</span> should be one less than the number of names in <span class="in">`into`</span>. </span>
<span id="cb45-903"><a href="#cb45-903" aria-hidden="true" tabindex="-1"></a>You can use this to separate the last two digits of each year:</span>
<span id="cb45-904"><a href="#cb45-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-905"><a href="#cb45-905" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F}</span></span>
<span id="cb45-906"><a href="#cb45-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-907"><a href="#cb45-907" aria-hidden="true" tabindex="-1"></a><span class="in">separate(data = table3, col = year, into = c("century", "year"), </span></span>
<span id="cb45-908"><a href="#cb45-908" aria-hidden="true" tabindex="-1"></a><span class="in">         sep = 2)</span></span>
<span id="cb45-909"><a href="#cb45-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-910"><a href="#cb45-910" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-911"><a href="#cb45-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-912"><a href="#cb45-912" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-913"><a href="#cb45-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-914"><a href="#cb45-914" aria-hidden="true" tabindex="-1"></a><span class="in">g8 &lt;- separate(data = table3, col = year, into = c("century", "year"), sep = 2)</span></span>
<span id="cb45-915"><a href="#cb45-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-916"><a href="#cb45-916" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g8, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-917"><a href="#cb45-917" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-918"><a href="#cb45-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-919"><a href="#cb45-919" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-920"><a href="#cb45-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-921"><a href="#cb45-921" aria-hidden="true" tabindex="-1"></a>Separating columns can also be done with base <span class="in">`R`</span>, although it takes a bit more coding:</span>
<span id="cb45-922"><a href="#cb45-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-923"><a href="#cb45-923" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = FALSE}</span></span>
<span id="cb45-924"><a href="#cb45-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-925"><a href="#cb45-925" aria-hidden="true" tabindex="-1"></a><span class="in">table3$cases &lt;- sapply(table3$rate, function(x) try(strsplit(x, "/")[[1]][1]), USE.NAMES = FALSE)</span></span>
<span id="cb45-926"><a href="#cb45-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-927"><a href="#cb45-927" aria-hidden="true" tabindex="-1"></a><span class="in">table3$population &lt;- sapply(table3$rate, function(x) try(strsplit(x, "/")[[1]][2]), USE.NAMES = FALSE)</span></span>
<span id="cb45-928"><a href="#cb45-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-929"><a href="#cb45-929" aria-hidden="true" tabindex="-1"></a><span class="in">tb3 </span></span>
<span id="cb45-930"><a href="#cb45-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-931"><a href="#cb45-931" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-932"><a href="#cb45-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-933"><a href="#cb45-933" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-934"><a href="#cb45-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-935"><a href="#cb45-935" aria-hidden="true" tabindex="-1"></a><span class="in">table3$cases &lt;- sapply(table3$rate, function(x) try(strsplit(x, "/")[[1]][1]), USE.NAMES = FALSE)</span></span>
<span id="cb45-936"><a href="#cb45-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-937"><a href="#cb45-937" aria-hidden="true" tabindex="-1"></a><span class="in">table3$population &lt;- sapply(table3$rate, function(x) try(strsplit(x, "/")[[1]][2]), USE.NAMES = FALSE)</span></span>
<span id="cb45-938"><a href="#cb45-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-939"><a href="#cb45-939" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(table3, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-940"><a href="#cb45-940" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-941"><a href="#cb45-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-942"><a href="#cb45-942" aria-hidden="true" tabindex="-1"></a><span class="in">str(g6)</span></span>
<span id="cb45-943"><a href="#cb45-943" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-944"><a href="#cb45-944" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-945"><a href="#cb45-945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-946"><a href="#cb45-946" aria-hidden="true" tabindex="-1"></a><span class="fu">## Unite</span></span>
<span id="cb45-947"><a href="#cb45-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-948"><a href="#cb45-948" aria-hidden="true" tabindex="-1"></a><span class="in">`unite()`</span> is the inverse of <span class="in">`separate()`</span>: combining multiple columns into a single column:</span>
<span id="cb45-949"><a href="#cb45-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-950"><a href="#cb45-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-951"><a href="#cb45-951" aria-hidden="true" tabindex="-1"></a>&lt;img src="unite.png" alt="unite data" height="500" width="850"&gt;</span>
<span id="cb45-952"><a href="#cb45-952" aria-hidden="true" tabindex="-1"></a>&lt;font size="2"&gt;* Modified from &lt;i&gt;R for Data Science&lt;/i&gt;&lt;/font&gt;</span>
<span id="cb45-953"><a href="#cb45-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-954"><a href="#cb45-954" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-955"><a href="#cb45-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-956"><a href="#cb45-956" aria-hidden="true" tabindex="-1"></a>However, you will need it much less frequently than <span class="in">`separate()`</span>. </span>
<span id="cb45-957"><a href="#cb45-957" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-958"><a href="#cb45-958" aria-hidden="true" tabindex="-1"></a>We can use <span class="in">`unite()`</span> to rejoin the *century* and *year* columns that we created above:</span>
<span id="cb45-959"><a href="#cb45-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-960"><a href="#cb45-960" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=F}</span></span>
<span id="cb45-961"><a href="#cb45-961" aria-hidden="true" tabindex="-1"></a><span class="in">unite(data = table5, col = "new", "century", "year")</span></span>
<span id="cb45-962"><a href="#cb45-962" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-963"><a href="#cb45-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-964"><a href="#cb45-964" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=T, echo=F}</span></span>
<span id="cb45-965"><a href="#cb45-965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-966"><a href="#cb45-966" aria-hidden="true" tabindex="-1"></a><span class="in">g9 &lt;- unite(data = table5, col = "new", "century", "year")</span></span>
<span id="cb45-967"><a href="#cb45-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-968"><a href="#cb45-968" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::kable(g9, row.names = F, escape = FALSE) %&gt;%</span></span>
<span id="cb45-969"><a href="#cb45-969" aria-hidden="true" tabindex="-1"></a><span class="in">  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = FALSE, font_size = 14)</span></span>
<span id="cb45-970"><a href="#cb45-970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-971"><a href="#cb45-971" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb45-972"><a href="#cb45-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-973"><a href="#cb45-973" aria-hidden="true" tabindex="-1"></a>In this function we can also use the <span class="in">`sep`</span> argument (although in this example it was not specified).</span>
<span id="cb45-974"><a href="#cb45-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-975"><a href="#cb45-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-976"><a href="#cb45-976" aria-hidden="true" tabindex="-1"></a><span class="dv">&amp;nbsp;</span></span>
<span id="cb45-977"><a href="#cb45-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-978"><a href="#cb45-978" aria-hidden="true" tabindex="-1"></a>&lt;div class="alert alert-info"&gt;</span>
<span id="cb45-979"><a href="#cb45-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-980"><a href="#cb45-980" aria-hidden="true" tabindex="-1"></a>&lt;font size="5"&gt;Exercise 3&lt;/font&gt; </span>
<span id="cb45-981"><a href="#cb45-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-982"><a href="#cb45-982" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-983"><a href="#cb45-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-984"><a href="#cb45-984" aria-hidden="true" tabindex="-1"></a>3.1 Unite *century* and *year* in "table5" using base <span class="in">`R`</span> (hint: <span class="in">`paste()`</span>)</span>
<span id="cb45-985"><a href="#cb45-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-986"><a href="#cb45-986" aria-hidden="true" tabindex="-1"></a>&lt;/br&gt;</span>
<span id="cb45-987"><a href="#cb45-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-988"><a href="#cb45-988" aria-hidden="true" tabindex="-1"></a>&lt;/div&gt;</span>
<span id="cb45-989"><a href="#cb45-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-990"><a href="#cb45-990" aria-hidden="true" tabindex="-1"></a>----</span>
<span id="cb45-991"><a href="#cb45-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-992"><a href="#cb45-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-993"><a href="#cb45-993" aria-hidden="true" tabindex="-1"></a><span class="fu"># References {.unnumbered .unlisted} </span></span>
<span id="cb45-994"><a href="#cb45-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-995"><a href="#cb45-995" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Clements, J. F., T. S. Schulenberg, M. J. Iliff, D. Roberson, T. A. Fredericks, B. L. Sullivan, and C. L. Wood. 2017. *The eBird/Clements checklist of birds of the world: v2016*.</span>
<span id="cb45-996"><a href="#cb45-996" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-997"><a href="#cb45-997" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Jones, Jon Bielby, Marcel Cardillo, Susanne A. Fritz, Justin O'Dell, C. David L. Orme, Kamran Safi, Wes Sechrest, Elizabeth H. Boakes, Chris Carbone, Christina Connolly, Michael J. Cutts, Janine K. Foster, Richard Grenyer, Michael Habib, Christopher A. Plaster, Samantha A. Price, Elizabeth A. Rigby, Janna Rist, Amber Teacher, Olaf R. P. Bininda-Emonds, John L. Gittleman, Georgina M. Mace, and Andy Purvis. 2009. *PanTHERIA: a species-level database of life history, ecology, and geography of extant and recently extinct mammals*. Ecology 90:2648.</span>
<span id="cb45-998"><a href="#cb45-998" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-999"><a href="#cb45-999" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Wickham, Hadley, and Garrett Grolemund. 2016. *R for data science: import, tidy, transform, visualize, and model data*.  <span class="co">[</span><span class="ot">website</span><span class="co">](http://r4ds.had.co.nz)</span></span>
<span id="cb45-1000"><a href="#cb45-1000" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-1001"><a href="#cb45-1001" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span><span class="co">[</span><span class="ot">Data import tutorial- DataCamp</span><span class="co">](https://www.datacamp.com/community/tutorials/r-data-import-tutorial)</span></span>
<span id="cb45-1002"><a href="#cb45-1002" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-1003"><a href="#cb45-1003" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb45-1004"><a href="#cb45-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-1005"><a href="#cb45-1005" aria-hidden="true" tabindex="-1"></a><span class="fu"># Session information {.unnumbered .unlisted}</span></span>
<span id="cb45-1006"><a href="#cb45-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-1007"><a href="#cb45-1007" aria-hidden="true" tabindex="-1"></a><span class="in">```{r session info, echo=F}</span></span>
<span id="cb45-1008"><a href="#cb45-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-1009"><a href="#cb45-1009" aria-hidden="true" tabindex="-1"></a><span class="in">sessionInfo()</span></span>
<span id="cb45-1010"><a href="#cb45-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-1011"><a href="#cb45-1011" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024 | <a href="https://marce10.github.io">Marcelo Araya-Salas</a></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>